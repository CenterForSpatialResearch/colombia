{"version":3,"file":"/home/ivan/devel/Leaflet.VectorGrid/.gobble-watch/08-uglifyjs/183/Leaflet.VectorGrid.bundled.min.js","sources":["/home/ivan/devel/Leaflet.VectorGrid/.gobble-watch/03-concat/226/Leaflet.VectorGrid.bundled.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","geojsonvt","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"clip","features","scale","k1","k2","axis","intersect","minAll","maxAll","clipped","min","max","feature","geometry","type","push","slices","clipPoints","clipGeometry","tags","slice","ak","closed","j","last","bk","b","points","area","dist","len","newSlice",2,"convert","data","tolerance","convertFeature","rings","geom","coords","coordinates","properties","create","projectPoint","project","geometries","calcBBox","lonlats","projected","simplify","calcSize","p","sin","Math","PI","x","y","log","abs","calcRingBBox","./simplify",3,"options","GeoJSONVT","extend","Object","debug","console","time","z2","maxZoom","extent","tiles","tileCoords","timeEnd","indexMaxZoom","indexMaxPoints","stats","total","wrap","buffer","intersectX","splitTile","numFeatures","numPoints","JSON","stringify","toID","z","intersectY","dest","src","isClippedSquare","tile","source","transform","point","createTile","prototype","solidChildren","cz","cx","cy","stack","solid","pop","id","tileTolerance","numSimplified","key","m","floor","tl","bl","tr","br","left","right","k3","k4","getTile","parent","z0","x0","y0","./clip","./convert","./tile","./transform","./wrap",4,"maxSqDist","sqDist","index","sqTolerance","first","getSqSegDist","bx","by","px","py","dx","dy",5,"tx","ty","noSimplify","transformed","addFeature","ring","simplified","simplifiedRing",6,"transformTile","k","transformPoint","round",7,"merged","shiftFeatureCoords","concat","offset","newFeatures","newGeometry","shiftCoords","newPoints","Pbf","Buffer","arr","buf","Uint8Array","set","readUInt32LE","BufferMethods","writeUInt32LE","readInt32LE","writeInt32LE","readFloatLE","writeFloatLE","readDoubleLE","writeDoubleLE","toString","write","copy","_isBuffer","encodeString","str","c","lead","bytes","charCodeAt","lastStr","lastStrEncoded","ieee754","pos","val","read","encoding","start","end","tmp","ch","decodeURIComponent","String","fromCharCode","subarray","byteLength","isBuffer","writePackedVarint","pbf","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","Varint","Fixed64","Bytes","Fixed32","SHIFT_LEFT_32","SHIFT_RIGHT_32","POW_2_63","pow","destroy","readFields","readField","result","readVarint","tag","startPos","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readFloat","readDouble","b0","b1","b2","b3","readVarint64","readSVarint","num","readBoolean","Boolean","readString","readBytes","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","realloc","finish","writeString","writeBytes","writeRawMessage","fn","obj","varintLen","ceil","LN2","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","./buffer","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","Infinity","value","rt","isNaN","factory","topojson","noop","absolute","kx","ky","translate","relative","x1","y1","reverse","array","bisect","lo","hi","mid","topology","map","feature$1","object","arc","arcs","absolute$$","line","polygon","geometryType","Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","stitchArcs","ends","p1","p0","forEach","dp","flush","fragmentByEnd","fragmentByStart","stitchedArcs","fragments","emptyIndex","fg","unshift","gf","mesh","meshArcs","apply","arguments","filter","geomsByArc","geoms","triangle","merge","mergeArcs","objects","register","ring$$","polygonsByArc","polygons","exterior","components","_","component","neighbors","sgn","indexesByArc","indexes","ij","ik","splice","compareArea","minAreaHeap","up","down","child","size","heap","removed","remove","presimplify","triangleArea","update","relative$$","triangles","maxArea","previous","next","version","vectorTile","VectorTile","VectorTileFeature","VectorTileLayer","./lib/vectortile.js","./lib/vectortilefeature.js","./lib/vectortilelayer.js","layers","readTile","layer","name","./vectortilelayer","keys","values","_pbf","_geometry","_keys","_values","readFeature","_id","readTag","types","loadGeometry","cmd","lines","cmdLen","clone","bbox","x2","y2","toGeoJSON","atan","exp","point-geometry","_features","readLayer","readValueMessage","./vectortilefeature.js","add","_add","sub","_sub","mult","_mult","div","_div","rotate","_rotate","matMult","_matMult","unit","_unit","perp","_perp","_round","mag","sqrt","equals","distSqr","angle","atan2","angleTo","angleWith","angleWithSep","cos","Array","isArray","L","SVG","Tile","initialize","tileSize","_size","_initContainer","_container","setAttribute","join","getContainer","onAdd","Util","FalseFn","_addPath","_rootGroup","appendChild","_path","svg","opts","Canvas","_layers","_drawnLayers","container","document","createElement","_ctx","getContext","canvas","VectorGrid","GridLayer","rendererFactory","vectorTileLayerStyles","done","renderer","getTileSize","vectorTilePromise","_getVectorTilePromise","then","layerName","pxPerExtent","layerStyle","Path","feat","_mkFeatureParts","styleOptions","Function","style","fill","_initPath","_updateStyle","_updatePoly","requestAnimFrame","bind","_parts","part","coord","vectorGrid","Slicer","vectorTileLayerName","geojson","_slicers","tileLayers","slicer","slicedTileLayer","vectorTileLayer","Promise","resolve","Protobuf","subdomains","url","_url","_getSubdomain","TileLayer","tileUrl","template","fetch","response","ok","blob","reader","FileReader","addEventListener","readAsArrayBuffer","json","feats","protobuf"],"mappings":"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","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.geojsonvt = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nmodule.exports = clip;\n\n/* clip features between two axis-parallel lines:\n *     |        |\n *  ___|___     |     /\n * /   |   \\____|____/\n *     |        |\n */\n\nfunction clip(features, scale, k1, k2, axis, intersect, minAll, maxAll) {\n\n    k1 /= scale;\n    k2 /= scale;\n\n    if (minAll >= k1 && maxAll <= k2) return features; // trivial accept\n    else if (minAll > k2 || maxAll < k1) return null; // trivial reject\n\n    var clipped = [];\n\n    for (var i = 0; i < features.length; i++) {\n\n        var feature = features[i],\n            geometry = feature.geometry,\n            type = feature.type,\n            min, max;\n\n        min = feature.min[axis];\n        max = feature.max[axis];\n\n        if (min >= k1 && max <= k2) { // trivial accept\n            clipped.push(feature);\n            continue;\n        } else if (min > k2 || max < k1) continue; // trivial reject\n\n        var slices = type === 1 ?\n                clipPoints(geometry, k1, k2, axis) :\n                clipGeometry(geometry, k1, k2, axis, intersect, type === 3);\n\n        if (slices.length) {\n            // if a feature got clipped, it will likely get clipped on the next zoom level as well,\n            // so there's no need to recalculate bboxes\n            clipped.push({\n                geometry: slices,\n                type: type,\n                tags: features[i].tags || null,\n                min: feature.min,\n                max: feature.max\n            });\n        }\n    }\n\n    return clipped.length ? clipped : null;\n}\n\nfunction clipPoints(geometry, k1, k2, axis) {\n    var slice = [];\n\n    for (var i = 0; i < geometry.length; i++) {\n        var a = geometry[i],\n            ak = a[axis];\n\n        if (ak >= k1 && ak <= k2) slice.push(a);\n    }\n    return slice;\n}\n\nfunction clipGeometry(geometry, k1, k2, axis, intersect, closed) {\n\n    var slices = [];\n\n    for (var i = 0; i < geometry.length; i++) {\n\n        var ak = 0,\n            bk = 0,\n            b = null,\n            points = geometry[i],\n            area = points.area,\n            dist = points.dist,\n            len = points.length,\n            a, j, last;\n\n        var slice = [];\n\n        for (j = 0; j < len - 1; j++) {\n            a = b || points[j];\n            b = points[j + 1];\n            ak = bk || a[axis];\n            bk = b[axis];\n\n            if (ak < k1) {\n\n                if ((bk > k2)) { // ---|-----|-->\n                    slice.push(intersect(a, b, k1), intersect(a, b, k2));\n                    if (!closed) slice = newSlice(slices, slice, area, dist);\n\n                } else if (bk >= k1) slice.push(intersect(a, b, k1)); // ---|-->  |\n\n            } else if (ak > k2) {\n\n                if ((bk < k1)) { // <--|-----|---\n                    slice.push(intersect(a, b, k2), intersect(a, b, k1));\n                    if (!closed) slice = newSlice(slices, slice, area, dist);\n\n                } else if (bk <= k2) slice.push(intersect(a, b, k2)); // |  <--|---\n\n            } else {\n\n                slice.push(a);\n\n                if (bk < k1) { // <--|---  |\n                    slice.push(intersect(a, b, k1));\n                    if (!closed) slice = newSlice(slices, slice, area, dist);\n\n                } else if (bk > k2) { // |  ---|-->\n                    slice.push(intersect(a, b, k2));\n                    if (!closed) slice = newSlice(slices, slice, area, dist);\n                }\n                // | --> |\n            }\n        }\n\n        // add the last point\n        a = points[len - 1];\n        ak = a[axis];\n        if (ak >= k1 && ak <= k2) slice.push(a);\n\n        // close the polygon if its endpoints are not the same after clipping\n\n        last = slice[slice.length - 1];\n        if (closed && last && (slice[0][0] !== last[0] || slice[0][1] !== last[1])) slice.push(slice[0]);\n\n        // add the final slice\n        newSlice(slices, slice, area, dist);\n    }\n\n    return slices;\n}\n\nfunction newSlice(slices, slice, area, dist) {\n    if (slice.length) {\n        // we don't recalculate the area/length of the unclipped geometry because the case where it goes\n        // below the visibility threshold as a result of clipping is rare, so we avoid doing unnecessary work\n        slice.area = area;\n        slice.dist = dist;\n\n        slices.push(slice);\n    }\n    return [];\n}\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nmodule.exports = convert;\n\nvar simplify = require('./simplify');\n\n// converts GeoJSON feature into an intermediate projected JSON vector format with simplification data\n\nfunction convert(data, tolerance) {\n    var features = [];\n\n    if (data.type === 'FeatureCollection') {\n        for (var i = 0; i < data.features.length; i++) {\n            convertFeature(features, data.features[i], tolerance);\n        }\n    } else if (data.type === 'Feature') {\n        convertFeature(features, data, tolerance);\n\n    } else {\n        // single geometry or a geometry collection\n        convertFeature(features, {geometry: data}, tolerance);\n    }\n    return features;\n}\n\nfunction convertFeature(features, feature, tolerance) {\n    var geom = feature.geometry,\n        type = geom.type,\n        coords = geom.coordinates,\n        tags = feature.properties,\n        i, j, rings;\n\n    if (type === 'Point') {\n        features.push(create(tags, 1, [projectPoint(coords)]));\n\n    } else if (type === 'MultiPoint') {\n        features.push(create(tags, 1, project(coords)));\n\n    } else if (type === 'LineString') {\n        features.push(create(tags, 2, [project(coords, tolerance)]));\n\n    } else if (type === 'MultiLineString' || type === 'Polygon') {\n        rings = [];\n        for (i = 0; i < coords.length; i++) {\n            rings.push(project(coords[i], tolerance));\n        }\n        features.push(create(tags, type === 'Polygon' ? 3 : 2, rings));\n\n    } else if (type === 'MultiPolygon') {\n        rings = [];\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                rings.push(project(coords[i][j], tolerance));\n            }\n        }\n        features.push(create(tags, 3, rings));\n\n    } else if (type === 'GeometryCollection') {\n        for (i = 0; i < geom.geometries.length; i++) {\n            convertFeature(features, {\n                geometry: geom.geometries[i],\n                properties: tags\n            }, tolerance);\n        }\n\n    } else {\n        throw new Error('Input data is not a valid GeoJSON object.');\n    }\n}\n\nfunction create(tags, type, geometry) {\n    var feature = {\n        geometry: geometry,\n        type: type,\n        tags: tags || null,\n        min: [2, 1], // initial bbox values;\n        max: [-1, 0]  // note that coords are usually in [0..1] range\n    };\n    calcBBox(feature);\n    return feature;\n}\n\nfunction project(lonlats, tolerance) {\n    var projected = [];\n    for (var i = 0; i < lonlats.length; i++) {\n        projected.push(projectPoint(lonlats[i]));\n    }\n    if (tolerance) {\n        simplify(projected, tolerance);\n        calcSize(projected);\n    }\n    return projected;\n}\n\nfunction projectPoint(p) {\n    var sin = Math.sin(p[1] * Math.PI / 180),\n        x = (p[0] / 360 + 0.5),\n        y = (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n\n    y = y < -1 ? -1 :\n        y > 1 ? 1 : y;\n\n    return [x, y, 0];\n}\n\n// calculate area and length of the poly\nfunction calcSize(points) {\n    var area = 0,\n        dist = 0;\n\n    for (var i = 0, a, b; i < points.length - 1; i++) {\n        a = b || points[i];\n        b = points[i + 1];\n\n        area += a[0] * b[1] - b[0] * a[1];\n\n        // use Manhattan distance instead of Euclidian one to avoid expensive square root computation\n        dist += Math.abs(b[0] - a[0]) + Math.abs(b[1] - a[1]);\n    }\n    points.area = Math.abs(area / 2);\n    points.dist = dist;\n}\n\n// calculate the feature bounding box for faster clipping later\nfunction calcBBox(feature) {\n    var geometry = feature.geometry,\n        min = feature.min,\n        max = feature.max;\n\n    if (feature.type === 1) calcRingBBox(min, max, geometry);\n    else for (var i = 0; i < geometry.length; i++) calcRingBBox(min, max, geometry[i]);\n\n    return feature;\n}\n\nfunction calcRingBBox(min, max, points) {\n    for (var i = 0, p; i < points.length; i++) {\n        p = points[i];\n        min[0] = Math.min(p[0], min[0]);\n        max[0] = Math.max(p[0], max[0]);\n        min[1] = Math.min(p[1], min[1]);\n        max[1] = Math.max(p[1], max[1]);\n    }\n}\n\n},{\"./simplify\":4}],3:[function(require,module,exports){\n'use strict';\n\nmodule.exports = geojsonvt;\n\nvar convert = require('./convert'),     // GeoJSON conversion and preprocessing\n    transform = require('./transform'), // coordinate transformation\n    clip = require('./clip'),           // stripe clipping algorithm\n    wrap = require('./wrap'),           // date line processing\n    createTile = require('./tile');     // final simplified tile generation\n\n\nfunction geojsonvt(data, options) {\n    return new GeoJSONVT(data, options);\n}\n\nfunction GeoJSONVT(data, options) {\n    options = this.options = extend(Object.create(this.options), options);\n\n    var debug = options.debug;\n\n    if (debug) console.time('preprocess data');\n\n    var z2 = 1 << options.maxZoom, // 2^z\n        features = convert(data, options.tolerance / (z2 * options.extent));\n\n    this.tiles = {};\n    this.tileCoords = [];\n\n    if (debug) {\n        console.timeEnd('preprocess data');\n        console.log('index: maxZoom: %d, maxPoints: %d', options.indexMaxZoom, options.indexMaxPoints);\n        console.time('generate tiles');\n        this.stats = {};\n        this.total = 0;\n    }\n\n    features = wrap(features, options.buffer / options.extent, intersectX);\n\n    // start slicing from the top tile down\n    if (features.length) this.splitTile(features, 0, 0, 0);\n\n    if (debug) {\n        if (features.length) console.log('features: %d, points: %d', this.tiles[0].numFeatures, this.tiles[0].numPoints);\n        console.timeEnd('generate tiles');\n        console.log('tiles generated:', this.total, JSON.stringify(this.stats));\n    }\n}\n\nGeoJSONVT.prototype.options = {\n    maxZoom: 14,            // max zoom to preserve detail on\n    indexMaxZoom: 5,        // max zoom in the tile index\n    indexMaxPoints: 100000, // max number of points per tile in the tile index\n    solidChildren: false,   // whether to tile solid square tiles further\n    tolerance: 3,           // simplification tolerance (higher means simpler)\n    extent: 4096,           // tile extent\n    buffer: 64,             // tile buffer on each side\n    debug: 0                // logging level (0, 1 or 2)\n};\n\nGeoJSONVT.prototype.splitTile = function (features, z, x, y, cz, cx, cy) {\n\n    var stack = [features, z, x, y],\n        options = this.options,\n        debug = options.debug,\n        solid = null;\n\n    // avoid recursion by using a processing queue\n    while (stack.length) {\n        y = stack.pop();\n        x = stack.pop();\n        z = stack.pop();\n        features = stack.pop();\n\n        var z2 = 1 << z,\n            id = toID(z, x, y),\n            tile = this.tiles[id],\n            tileTolerance = z === options.maxZoom ? 0 : options.tolerance / (z2 * options.extent);\n\n        if (!tile) {\n            if (debug > 1) console.time('creation');\n\n            tile = this.tiles[id] = createTile(features, z2, x, y, tileTolerance, z === options.maxZoom);\n            this.tileCoords.push({z: z, x: x, y: y});\n\n            if (debug) {\n                if (debug > 1) {\n                    console.log('tile z%d-%d-%d (features: %d, points: %d, simplified: %d)',\n                        z, x, y, tile.numFeatures, tile.numPoints, tile.numSimplified);\n                    console.timeEnd('creation');\n                }\n                var key = 'z' + z;\n                this.stats[key] = (this.stats[key] || 0) + 1;\n                this.total++;\n            }\n        }\n\n        // save reference to original geometry in tile so that we can drill down later if we stop now\n        tile.source = features;\n\n        // if it's the first-pass tiling\n        if (!cz) {\n            // stop tiling if we reached max zoom, or if the tile is too simple\n            if (z === options.indexMaxZoom || tile.numPoints <= options.indexMaxPoints) continue;\n\n        // if a drilldown to a specific tile\n        } else {\n            // stop tiling if we reached base zoom or our target tile zoom\n            if (z === options.maxZoom || z === cz) continue;\n\n            // stop tiling if it's not an ancestor of the target tile\n            var m = 1 << (cz - z);\n            if (x !== Math.floor(cx / m) || y !== Math.floor(cy / m)) continue;\n        }\n\n        // stop tiling if the tile is solid clipped square\n        if (!options.solidChildren && isClippedSquare(tile, options.extent, options.buffer)) {\n            if (cz) solid = z; // and remember the zoom if we're drilling down\n            continue;\n        }\n\n        // if we slice further down, no need to keep source geometry\n        tile.source = null;\n\n        if (debug > 1) console.time('clipping');\n\n        // values we'll use for clipping\n        var k1 = 0.5 * options.buffer / options.extent,\n            k2 = 0.5 - k1,\n            k3 = 0.5 + k1,\n            k4 = 1 + k1,\n            tl, bl, tr, br, left, right;\n\n        tl = bl = tr = br = null;\n\n        left  = clip(features, z2, x - k1, x + k3, 0, intersectX, tile.min[0], tile.max[0]);\n        right = clip(features, z2, x + k2, x + k4, 0, intersectX, tile.min[0], tile.max[0]);\n\n        if (left) {\n            tl = clip(left, z2, y - k1, y + k3, 1, intersectY, tile.min[1], tile.max[1]);\n            bl = clip(left, z2, y + k2, y + k4, 1, intersectY, tile.min[1], tile.max[1]);\n        }\n\n        if (right) {\n            tr = clip(right, z2, y - k1, y + k3, 1, intersectY, tile.min[1], tile.max[1]);\n            br = clip(right, z2, y + k2, y + k4, 1, intersectY, tile.min[1], tile.max[1]);\n        }\n\n        if (debug > 1) console.timeEnd('clipping');\n\n        if (tl) stack.push(tl, z + 1, x * 2,     y * 2);\n        if (bl) stack.push(bl, z + 1, x * 2,     y * 2 + 1);\n        if (tr) stack.push(tr, z + 1, x * 2 + 1, y * 2);\n        if (br) stack.push(br, z + 1, x * 2 + 1, y * 2 + 1);\n    }\n\n    return solid;\n};\n\nGeoJSONVT.prototype.getTile = function (z, x, y) {\n    var options = this.options,\n        extent = options.extent,\n        debug = options.debug;\n\n    var z2 = 1 << z;\n    x = ((x % z2) + z2) % z2; // wrap tile x coordinate\n\n    var id = toID(z, x, y);\n    if (this.tiles[id]) return transform.tile(this.tiles[id], extent);\n\n    if (debug > 1) console.log('drilling down to z%d-%d-%d', z, x, y);\n\n    var z0 = z,\n        x0 = x,\n        y0 = y,\n        parent;\n\n    while (!parent && z0 > 0) {\n        z0--;\n        x0 = Math.floor(x0 / 2);\n        y0 = Math.floor(y0 / 2);\n        parent = this.tiles[toID(z0, x0, y0)];\n    }\n\n    if (!parent || !parent.source) return null;\n\n    // if we found a parent tile containing the original geometry, we can drill down from it\n    if (debug > 1) console.log('found parent tile z%d-%d-%d', z0, x0, y0);\n\n    // it parent tile is a solid clipped square, return it instead since it's identical\n    if (isClippedSquare(parent, extent, options.buffer)) return transform.tile(parent, extent);\n\n    if (debug > 1) console.time('drilling down');\n    var solid = this.splitTile(parent.source, z0, x0, y0, z, x, y);\n    if (debug > 1) console.timeEnd('drilling down');\n\n    // one of the parent tiles was a solid clipped square\n    if (solid !== null) {\n        var m = 1 << (z - solid);\n        id = toID(solid, Math.floor(x / m), Math.floor(y / m));\n    }\n\n    return this.tiles[id] ? transform.tile(this.tiles[id], extent) : null;\n};\n\nfunction toID(z, x, y) {\n    return (((1 << z) * y + x) * 32) + z;\n}\n\nfunction intersectX(a, b, x) {\n    return [x, (x - a[0]) * (b[1] - a[1]) / (b[0] - a[0]) + a[1], 1];\n}\nfunction intersectY(a, b, y) {\n    return [(y - a[1]) * (b[0] - a[0]) / (b[1] - a[1]) + a[0], y, 1];\n}\n\nfunction extend(dest, src) {\n    for (var i in src) dest[i] = src[i];\n    return dest;\n}\n\n// checks whether a tile is a whole-area fill after clipping; if it is, there's no sense slicing it further\nfunction isClippedSquare(tile, extent, buffer) {\n\n    var features = tile.source;\n    if (features.length !== 1) return false;\n\n    var feature = features[0];\n    if (feature.type !== 3 || feature.geometry.length > 1) return false;\n\n    var len = feature.geometry[0].length;\n    if (len !== 5) return false;\n\n    for (var i = 0; i < len; i++) {\n        var p = transform.point(feature.geometry[0][i], extent, tile.z2, tile.x, tile.y);\n        if ((p[0] !== -buffer && p[0] !== extent + buffer) ||\n            (p[1] !== -buffer && p[1] !== extent + buffer)) return false;\n    }\n\n    return true;\n}\n\n},{\"./clip\":1,\"./convert\":2,\"./tile\":5,\"./transform\":6,\"./wrap\":7}],4:[function(require,module,exports){\n'use strict';\n\nmodule.exports = simplify;\n\n// calculate simplification data using optimized Douglas-Peucker algorithm\n\nfunction simplify(points, tolerance) {\n\n    var sqTolerance = tolerance * tolerance,\n        len = points.length,\n        first = 0,\n        last = len - 1,\n        stack = [],\n        i, maxSqDist, sqDist, index;\n\n    // always retain the endpoints (1 is the max value)\n    points[first][2] = 1;\n    points[last][2] = 1;\n\n    // avoid recursion by using a stack\n    while (last) {\n\n        maxSqDist = 0;\n\n        for (i = first + 1; i < last; i++) {\n            sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n            if (sqDist > maxSqDist) {\n                index = i;\n                maxSqDist = sqDist;\n            }\n        }\n\n        if (maxSqDist > sqTolerance) {\n            points[index][2] = maxSqDist; // save the point importance in squared pixels as a z coordinate\n            stack.push(first);\n            stack.push(index);\n            first = index;\n\n        } else {\n            last = stack.pop();\n            first = stack.pop();\n        }\n    }\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, a, b) {\n\n    var x = a[0], y = a[1],\n        bx = b[0], by = b[1],\n        px = p[0], py = p[1],\n        dx = bx - x,\n        dy = by - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = bx;\n            y = by;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = px - x;\n    dy = py - y;\n\n    return dx * dx + dy * dy;\n}\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nmodule.exports = createTile;\n\nfunction createTile(features, z2, tx, ty, tolerance, noSimplify) {\n    var tile = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: tx,\n        y: ty,\n        z2: z2,\n        transformed: false,\n        min: [2, 1],\n        max: [-1, 0]\n    };\n    for (var i = 0; i < features.length; i++) {\n        tile.numFeatures++;\n        addFeature(tile, features[i], tolerance, noSimplify);\n\n        var min = features[i].min,\n            max = features[i].max;\n\n        if (min[0] < tile.min[0]) tile.min[0] = min[0];\n        if (min[1] < tile.min[1]) tile.min[1] = min[1];\n        if (max[0] > tile.max[0]) tile.max[0] = max[0];\n        if (max[1] > tile.max[1]) tile.max[1] = max[1];\n    }\n    return tile;\n}\n\nfunction addFeature(tile, feature, tolerance, noSimplify) {\n\n    var geom = feature.geometry,\n        type = feature.type,\n        simplified = [],\n        sqTolerance = tolerance * tolerance,\n        i, j, ring, p;\n\n    if (type === 1) {\n        for (i = 0; i < geom.length; i++) {\n            simplified.push(geom[i]);\n            tile.numPoints++;\n            tile.numSimplified++;\n        }\n\n    } else {\n\n        // simplify and transform projected coordinates for tile geometry\n        for (i = 0; i < geom.length; i++) {\n            ring = geom[i];\n\n            // filter out tiny polylines & polygons\n            if (!noSimplify && ((type === 2 && ring.dist < tolerance) ||\n                                (type === 3 && ring.area < sqTolerance))) {\n                tile.numPoints += ring.length;\n                continue;\n            }\n\n            var simplifiedRing = [];\n\n            for (j = 0; j < ring.length; j++) {\n                p = ring[j];\n                // keep points with importance > tolerance\n                if (noSimplify || p[2] > sqTolerance) {\n                    simplifiedRing.push(p);\n                    tile.numSimplified++;\n                }\n                tile.numPoints++;\n            }\n\n            simplified.push(simplifiedRing);\n        }\n    }\n\n    if (simplified.length) {\n        tile.features.push({\n            geometry: simplified,\n            type: type,\n            tags: feature.tags || null\n        });\n    }\n}\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nexports.tile = transformTile;\nexports.point = transformPoint;\n\n// Transforms the coordinates of each feature in the given tile from\n// mercator-projected space into (extent x extent) tile space.\nfunction transformTile(tile, extent) {\n    if (tile.transformed) return tile;\n\n    var z2 = tile.z2,\n        tx = tile.x,\n        ty = tile.y,\n        i, j, k;\n\n    for (i = 0; i < tile.features.length; i++) {\n        var feature = tile.features[i],\n            geom = feature.geometry,\n            type = feature.type;\n\n        if (type === 1) {\n            for (j = 0; j < geom.length; j++) geom[j] = transformPoint(geom[j], extent, z2, tx, ty);\n\n        } else {\n            for (j = 0; j < geom.length; j++) {\n                var ring = geom[j];\n                for (k = 0; k < ring.length; k++) ring[k] = transformPoint(ring[k], extent, z2, tx, ty);\n            }\n        }\n    }\n\n    tile.transformed = true;\n\n    return tile;\n}\n\nfunction transformPoint(p, extent, z2, tx, ty) {\n    var x = Math.round(extent * (p[0] * z2 - tx)),\n        y = Math.round(extent * (p[1] * z2 - ty));\n    return [x, y];\n}\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nvar clip = require('./clip');\n\nmodule.exports = wrap;\n\nfunction wrap(features, buffer, intersectX) {\n    var merged = features,\n        left  = clip(features, 1, -1 - buffer, buffer,     0, intersectX, -1, 2), // left world copy\n        right = clip(features, 1,  1 - buffer, 2 + buffer, 0, intersectX, -1, 2); // right world copy\n\n    if (left || right) {\n        merged = clip(features, 1, -buffer, 1 + buffer, 0, intersectX, -1, 2); // center world copy\n\n        if (left) merged = shiftFeatureCoords(left, 1).concat(merged); // merge left into center\n        if (right) merged = merged.concat(shiftFeatureCoords(right, -1)); // merge right into center\n    }\n\n    return merged;\n}\n\nfunction shiftFeatureCoords(features, offset) {\n    var newFeatures = [];\n\n    for (var i = 0; i < features.length; i++) {\n        var feature = features[i],\n            type = feature.type;\n\n        var newGeometry;\n\n        if (type === 1) {\n            newGeometry = shiftCoords(feature.geometry, offset);\n        } else {\n            newGeometry = [];\n            for (var j = 0; j < feature.geometry.length; j++) {\n                newGeometry.push(shiftCoords(feature.geometry[j], offset));\n            }\n        }\n\n        newFeatures.push({\n            geometry: newGeometry,\n            type: type,\n            tags: feature.tags,\n            min: [feature.min[0] + offset, feature.min[1]],\n            max: [feature.max[0] + offset, feature.max[1]]\n        });\n    }\n\n    return newFeatures;\n}\n\nfunction shiftCoords(points, offset) {\n    var newPoints = [];\n    newPoints.area = points.area;\n    newPoints.dist = points.dist;\n\n    for (var i = 0; i < points.length; i++) {\n        newPoints.push([points[i][0] + offset, points[i][1], points[i][2]]);\n    }\n    return newPoints;\n}\n\n},{\"./clip\":1}]},{},[3])(3)\n});\n\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Pbf = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n// lightweight Buffer shim for pbf browser build\n// based on code from github.com/feross/buffer (MIT-licensed)\n\nmodule.exports = Buffer;\n\nvar ieee754 = require('ieee754');\n\nvar BufferMethods;\n\nfunction Buffer(length) {\n    var arr;\n    if (length && length.length) {\n        arr = length;\n        length = arr.length;\n    }\n    var buf = new Uint8Array(length || 0);\n    if (arr) buf.set(arr);\n\n    buf.readUInt32LE = BufferMethods.readUInt32LE;\n    buf.writeUInt32LE = BufferMethods.writeUInt32LE;\n    buf.readInt32LE = BufferMethods.readInt32LE;\n    buf.writeInt32LE = BufferMethods.writeInt32LE;\n    buf.readFloatLE = BufferMethods.readFloatLE;\n    buf.writeFloatLE = BufferMethods.writeFloatLE;\n    buf.readDoubleLE = BufferMethods.readDoubleLE;\n    buf.writeDoubleLE = BufferMethods.writeDoubleLE;\n    buf.toString = BufferMethods.toString;\n    buf.write = BufferMethods.write;\n    buf.slice = BufferMethods.slice;\n    buf.copy = BufferMethods.copy;\n\n    buf._isBuffer = true;\n    return buf;\n}\n\nvar lastStr, lastStrEncoded;\n\nBufferMethods = {\n    readUInt32LE: function(pos) {\n        return ((this[pos]) |\n            (this[pos + 1] << 8) |\n            (this[pos + 2] << 16)) +\n            (this[pos + 3] * 0x1000000);\n    },\n\n    writeUInt32LE: function(val, pos) {\n        this[pos] = val;\n        this[pos + 1] = (val >>> 8);\n        this[pos + 2] = (val >>> 16);\n        this[pos + 3] = (val >>> 24);\n    },\n\n    readInt32LE: function(pos) {\n        return ((this[pos]) |\n            (this[pos + 1] << 8) |\n            (this[pos + 2] << 16)) +\n            (this[pos + 3] << 24);\n    },\n\n    readFloatLE:  function(pos) { return ieee754.read(this, pos, true, 23, 4); },\n    readDoubleLE: function(pos) { return ieee754.read(this, pos, true, 52, 8); },\n\n    writeFloatLE:  function(val, pos) { return ieee754.write(this, val, pos, true, 23, 4); },\n    writeDoubleLE: function(val, pos) { return ieee754.write(this, val, pos, true, 52, 8); },\n\n    toString: function(encoding, start, end) {\n        var str = '',\n            tmp = '';\n\n        start = start || 0;\n        end = Math.min(this.length, end || this.length);\n\n        for (var i = start; i < end; i++) {\n            var ch = this[i];\n            if (ch <= 0x7F) {\n                str += decodeURIComponent(tmp) + String.fromCharCode(ch);\n                tmp = '';\n            } else {\n                tmp += '%' + ch.toString(16);\n            }\n        }\n\n        str += decodeURIComponent(tmp);\n\n        return str;\n    },\n\n    write: function(str, pos) {\n        var bytes = str === lastStr ? lastStrEncoded : encodeString(str);\n        for (var i = 0; i < bytes.length; i++) {\n            this[pos + i] = bytes[i];\n        }\n    },\n\n    slice: function(start, end) {\n        return this.subarray(start, end);\n    },\n\n    copy: function(buf, pos) {\n        pos = pos || 0;\n        for (var i = 0; i < this.length; i++) {\n            buf[pos + i] = this[i];\n        }\n    }\n};\n\nBufferMethods.writeInt32LE = BufferMethods.writeUInt32LE;\n\nBuffer.byteLength = function(str) {\n    lastStr = str;\n    lastStrEncoded = encodeString(str);\n    return lastStrEncoded.length;\n};\n\nBuffer.isBuffer = function(buf) {\n    return !!(buf && buf._isBuffer);\n};\n\nfunction encodeString(str) {\n    var length = str.length,\n        bytes = [];\n\n    for (var i = 0, c, lead; i < length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n\n            if (lead) {\n                if (c < 0xDC00) {\n                    bytes.push(0xEF, 0xBF, 0xBD);\n                    lead = c;\n                    continue;\n\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n\n            } else {\n                if (c > 0xDBFF || (i + 1 === length)) bytes.push(0xEF, 0xBF, 0xBD);\n                else lead = c;\n\n                continue;\n            }\n\n        } else if (lead) {\n            bytes.push(0xEF, 0xBF, 0xBD);\n            lead = null;\n        }\n\n        if (c < 0x80) bytes.push(c);\n        else if (c < 0x800) bytes.push(c >> 0x6 | 0xC0, c & 0x3F | 0x80);\n        else if (c < 0x10000) bytes.push(c >> 0xC | 0xE0, c >> 0x6 & 0x3F | 0x80, c & 0x3F | 0x80);\n        else bytes.push(c >> 0x12 | 0xF0, c >> 0xC & 0x3F | 0x80, c >> 0x6 & 0x3F | 0x80, c & 0x3F | 0x80);\n    }\n    return bytes;\n}\n\n},{\"ieee754\":3}],2:[function(require,module,exports){\n(function (global){\n'use strict';\n\nmodule.exports = Pbf;\n\nvar Buffer = global.Buffer || require('./buffer');\n\nfunction Pbf(buf) {\n    this.buf = !Buffer.isBuffer(buf) ? new Buffer(buf || 0) : buf;\n    this.pos = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32,\n    POW_2_63 = Math.pow(2, 63);\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = this.buf.readUInt32LE(this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = this.buf.readInt32LE(this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = this.buf.readUInt32LE(this.pos) + this.buf.readUInt32LE(this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = this.buf.readUInt32LE(this.pos) + this.buf.readInt32LE(this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = this.buf.readFloatLE(this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = this.buf.readDoubleLE(this.pos);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function() {\n        var buf = this.buf,\n            val, b, b0, b1, b2, b3;\n\n        b0 = buf[this.pos++]; if (b0 < 0x80) return b0;                 b0 = b0 & 0x7f;\n        b1 = buf[this.pos++]; if (b1 < 0x80) return b0 | b1 << 7;       b1 = (b1 & 0x7f) << 7;\n        b2 = buf[this.pos++]; if (b2 < 0x80) return b0 | b1 | b2 << 14; b2 = (b2 & 0x7f) << 14;\n        b3 = buf[this.pos++]; if (b3 < 0x80) return b0 | b1 | b2 | b3 << 21;\n\n        val = b0 | b1 | b2 | (b3 & 0x7f) << 21;\n\n        b = buf[this.pos++]; val += (b & 0x7f) * 0x10000000;         if (b < 0x80) return val;\n        b = buf[this.pos++]; val += (b & 0x7f) * 0x800000000;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val += (b & 0x7f) * 0x40000000000;      if (b < 0x80) return val;\n        b = buf[this.pos++]; val += (b & 0x7f) * 0x2000000000000;    if (b < 0x80) return val;\n        b = buf[this.pos++]; val += (b & 0x7f) * 0x100000000000000;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val += (b & 0x7f) * 0x8000000000000000; if (b < 0x80) return val;\n\n        throw new Error('Expected varint not more than 10 bytes');\n    },\n\n    readVarint64: function() {\n        var startPos = this.pos,\n            val = this.readVarint();\n\n        if (val < POW_2_63) return val;\n\n        var pos = this.pos - 2;\n        while (this.buf[pos] === 0xff) pos--;\n        if (pos < startPos) pos = startPos;\n\n        val = 0;\n        for (var i = 0; i < pos - startPos + 1; i++) {\n            var b = ~this.buf[startPos + i] & 0x7f;\n            val += i < 4 ? b << i * 7 : b * Math.pow(2, i * 7);\n        }\n\n        return -val - 1;\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = this.buf.toString('utf8', this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.slice(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readVarint());\n        return arr;\n    },\n    readPackedSVarint: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function() {\n        var end = this.readVarint() + this.pos, arr = [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Buffer(length);\n            this.buf.copy(buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.slice(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        this.buf.writeUInt32LE(val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        this.buf.writeInt32LE(val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        this.buf.writeInt32LE(val & -1, this.pos);\n        this.buf.writeUInt32LE(Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        this.buf.writeInt32LE(val & -1, this.pos);\n        this.buf.writeInt32LE(Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val;\n\n        if (val <= 0x7f) {\n            this.realloc(1);\n            this.buf[this.pos++] = val;\n\n        } else if (val <= 0x3fff) {\n            this.realloc(2);\n            this.buf[this.pos++] = ((val >>> 0) & 0x7f) | 0x80;\n            this.buf[this.pos++] = ((val >>> 7) & 0x7f);\n\n        } else if (val <= 0x1fffff) {\n            this.realloc(3);\n            this.buf[this.pos++] = ((val >>> 0) & 0x7f) | 0x80;\n            this.buf[this.pos++] = ((val >>> 7) & 0x7f) | 0x80;\n            this.buf[this.pos++] = ((val >>> 14) & 0x7f);\n\n        } else if (val <= 0xfffffff) {\n            this.realloc(4);\n            this.buf[this.pos++] = ((val >>> 0) & 0x7f) | 0x80;\n            this.buf[this.pos++] = ((val >>> 7) & 0x7f) | 0x80;\n            this.buf[this.pos++] = ((val >>> 14) & 0x7f) | 0x80;\n            this.buf[this.pos++] = ((val >>> 21) & 0x7f);\n\n        } else {\n            var pos = this.pos;\n            while (val >= 0x80) {\n                this.realloc(1);\n                this.buf[this.pos++] = (val & 0xff) | 0x80;\n                val /= 0x80;\n            }\n            this.realloc(1);\n            this.buf[this.pos++] = val | 0;\n            if (this.pos - pos > 10) throw new Error('Given varint doesn\\'t fit into 10 bytes');\n        }\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        var bytes = Buffer.byteLength(str);\n        this.writeVarint(bytes);\n        this.realloc(bytes);\n        this.buf.write(str, this.pos);\n        this.pos += bytes;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        this.buf.writeFloatLE(val, this.pos);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        this.buf.writeDoubleLE(val, this.pos);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        var varintLen =\n            len <= 0x7f ? 1 :\n            len <= 0x3fff ? 2 :\n            len <= 0x1fffff ? 3 :\n            len <= 0xfffffff ? 4 : Math.ceil(Math.log(len) / (Math.LN2 * 7));\n\n        // if 1 byte isn't enough for encoding message length, shift the data to the right\n        if (varintLen > 1) {\n            this.realloc(varintLen - 1);\n            for (var i = this.pos - 1; i >= startPos; i--) this.buf[i + varintLen - 1] = this.buf[i];\n        }\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./buffer\":1}],3:[function(require,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}]},{},[2])(2)\n});\n\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.topojson = {})));\n}(this, function (exports) { 'use strict';\n\n  function noop() {}\n\n  function absolute(transform) {\n    if (!transform) return noop;\n    var x0,\n        y0,\n        kx = transform.scale[0],\n        ky = transform.scale[1],\n        dx = transform.translate[0],\n        dy = transform.translate[1];\n    return function(point, i) {\n      if (!i) x0 = y0 = 0;\n      point[0] = (x0 += point[0]) * kx + dx;\n      point[1] = (y0 += point[1]) * ky + dy;\n    };\n  }\n\n  function relative(transform) {\n    if (!transform) return noop;\n    var x0,\n        y0,\n        kx = transform.scale[0],\n        ky = transform.scale[1],\n        dx = transform.translate[0],\n        dy = transform.translate[1];\n    return function(point, i) {\n      if (!i) x0 = y0 = 0;\n      var x1 = (point[0] - dx) / kx | 0,\n          y1 = (point[1] - dy) / ky | 0;\n      point[0] = x1 - x0;\n      point[1] = y1 - y0;\n      x0 = x1;\n      y0 = y1;\n    };\n  }\n\n  function reverse(array, n) {\n    var t, j = array.length, i = j - n;\n    while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n  }\n\n  function bisect(a, x) {\n    var lo = 0, hi = a.length;\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (a[mid] < x) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function feature(topology, o) {\n    return o.type === \"GeometryCollection\" ? {\n      type: \"FeatureCollection\",\n      features: o.geometries.map(function(o) { return feature$1(topology, o); })\n    } : feature$1(topology, o);\n  }\n\n  function feature$1(topology, o) {\n    var f = {\n      type: \"Feature\",\n      id: o.id,\n      properties: o.properties || {},\n      geometry: object(topology, o)\n    };\n    if (o.id == null) delete f.id;\n    return f;\n  }\n\n  function object(topology, o) {\n    var absolute$$ = absolute(topology.transform),\n        arcs = topology.arcs;\n\n    function arc(i, points) {\n      if (points.length) points.pop();\n      for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length, p; k < n; ++k) {\n        points.push(p = a[k].slice());\n        absolute$$(p, k);\n      }\n      if (i < 0) reverse(points, n);\n    }\n\n    function point(p) {\n      p = p.slice();\n      absolute$$(p, 0);\n      return p;\n    }\n\n    function line(arcs) {\n      var points = [];\n      for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n      if (points.length < 2) points.push(points[0].slice());\n      return points;\n    }\n\n    function ring(arcs) {\n      var points = line(arcs);\n      while (points.length < 4) points.push(points[0].slice());\n      return points;\n    }\n\n    function polygon(arcs) {\n      return arcs.map(ring);\n    }\n\n    function geometry(o) {\n      var t = o.type;\n      return t === \"GeometryCollection\" ? {type: t, geometries: o.geometries.map(geometry)}\n          : t in geometryType ? {type: t, coordinates: geometryType[t](o)}\n          : null;\n    }\n\n    var geometryType = {\n      Point: function(o) { return point(o.coordinates); },\n      MultiPoint: function(o) { return o.coordinates.map(point); },\n      LineString: function(o) { return line(o.arcs); },\n      MultiLineString: function(o) { return o.arcs.map(line); },\n      Polygon: function(o) { return polygon(o.arcs); },\n      MultiPolygon: function(o) { return o.arcs.map(polygon); }\n    };\n\n    return geometry(o);\n  }\n\n  function stitchArcs(topology, arcs) {\n    var stitchedArcs = {},\n        fragmentByStart = {},\n        fragmentByEnd = {},\n        fragments = [],\n        emptyIndex = -1;\n\n    // Stitch empty arcs first, since they may be subsumed by other arcs.\n    arcs.forEach(function(i, j) {\n      var arc = topology.arcs[i < 0 ? ~i : i], t;\n      if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n        t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n      }\n    });\n\n    arcs.forEach(function(i) {\n      var e = ends(i),\n          start = e[0],\n          end = e[1],\n          f, g;\n\n      if (f = fragmentByEnd[start]) {\n        delete fragmentByEnd[f.end];\n        f.push(i);\n        f.end = end;\n        if (g = fragmentByStart[end]) {\n          delete fragmentByStart[g.start];\n          var fg = g === f ? f : f.concat(g);\n          fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n        } else {\n          fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        }\n      } else if (f = fragmentByStart[end]) {\n        delete fragmentByStart[f.start];\n        f.unshift(i);\n        f.start = start;\n        if (g = fragmentByEnd[start]) {\n          delete fragmentByEnd[g.end];\n          var gf = g === f ? f : g.concat(f);\n          fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n        } else {\n          fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        }\n      } else {\n        f = [i];\n        fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n      }\n    });\n\n    function ends(i) {\n      var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n      if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n      else p1 = arc[arc.length - 1];\n      return i < 0 ? [p1, p0] : [p0, p1];\n    }\n\n    function flush(fragmentByEnd, fragmentByStart) {\n      for (var k in fragmentByEnd) {\n        var f = fragmentByEnd[k];\n        delete fragmentByStart[f.start];\n        delete f.start;\n        delete f.end;\n        f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n        fragments.push(f);\n      }\n    }\n\n    flush(fragmentByEnd, fragmentByStart);\n    flush(fragmentByStart, fragmentByEnd);\n    arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n    return fragments;\n  }\n\n  function mesh(topology) {\n    return object(topology, meshArcs.apply(this, arguments));\n  }\n\n  function meshArcs(topology, o, filter) {\n    var arcs = [];\n\n    function arc(i) {\n      var j = i < 0 ? ~i : i;\n      (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n    }\n\n    function line(arcs) {\n      arcs.forEach(arc);\n    }\n\n    function polygon(arcs) {\n      arcs.forEach(line);\n    }\n\n    function geometry(o) {\n      if (o.type === \"GeometryCollection\") o.geometries.forEach(geometry);\n      else if (o.type in geometryType) geom = o, geometryType[o.type](o.arcs);\n    }\n\n    if (arguments.length > 1) {\n      var geomsByArc = [],\n          geom;\n\n      var geometryType = {\n        LineString: line,\n        MultiLineString: polygon,\n        Polygon: polygon,\n        MultiPolygon: function(arcs) { arcs.forEach(polygon); }\n      };\n\n      geometry(o);\n\n      geomsByArc.forEach(arguments.length < 3\n          ? function(geoms) { arcs.push(geoms[0].i); }\n          : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n    } else {\n      for (var i = 0, n = topology.arcs.length; i < n; ++i) arcs.push(i);\n    }\n\n    return {type: \"MultiLineString\", arcs: stitchArcs(topology, arcs)};\n  }\n\n  function triangle(triangle) {\n    var a = triangle[0], b = triangle[1], c = triangle[2];\n    return Math.abs((a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]));\n  }\n\n  function ring(ring) {\n    var i = -1,\n        n = ring.length,\n        a,\n        b = ring[n - 1],\n        area = 0;\n\n    while (++i < n) {\n      a = b;\n      b = ring[i];\n      area += a[0] * b[1] - a[1] * b[0];\n    }\n\n    return area / 2;\n  }\n\n  function merge(topology) {\n    return object(topology, mergeArcs.apply(this, arguments));\n  }\n\n  function mergeArcs(topology, objects) {\n    var polygonsByArc = {},\n        polygons = [],\n        components = [];\n\n    objects.forEach(function(o) {\n      if (o.type === \"Polygon\") register(o.arcs);\n      else if (o.type === \"MultiPolygon\") o.arcs.forEach(register);\n    });\n\n    function register(polygon) {\n      polygon.forEach(function(ring$$) {\n        ring$$.forEach(function(arc) {\n          (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n        });\n      });\n      polygons.push(polygon);\n    }\n\n    function exterior(ring$$) {\n      return ring(object(topology, {type: \"Polygon\", arcs: [ring$$]}).coordinates[0]) > 0; // TODO allow spherical?\n    }\n\n    polygons.forEach(function(polygon) {\n      if (!polygon._) {\n        var component = [],\n            neighbors = [polygon];\n        polygon._ = 1;\n        components.push(component);\n        while (polygon = neighbors.pop()) {\n          component.push(polygon);\n          polygon.forEach(function(ring$$) {\n            ring$$.forEach(function(arc) {\n              polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n                if (!polygon._) {\n                  polygon._ = 1;\n                  neighbors.push(polygon);\n                }\n              });\n            });\n          });\n        }\n      }\n    });\n\n    polygons.forEach(function(polygon) {\n      delete polygon._;\n    });\n\n    return {\n      type: \"MultiPolygon\",\n      arcs: components.map(function(polygons) {\n        var arcs = [], n;\n\n        // Extract the exterior (unique) arcs.\n        polygons.forEach(function(polygon) {\n          polygon.forEach(function(ring$$) {\n            ring$$.forEach(function(arc) {\n              if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n                arcs.push(arc);\n              }\n            });\n          });\n        });\n\n        // Stitch the arcs into one or more rings.\n        arcs = stitchArcs(topology, arcs);\n\n        // If more than one ring is returned,\n        // at most one of these rings can be the exterior;\n        // this exterior ring has the same winding order\n        // as any exterior ring in the original polygons.\n        if ((n = arcs.length) > 1) {\n          var sgn = exterior(polygons[0][0]);\n          for (var i = 0, t; i < n; ++i) {\n            if (sgn === exterior(arcs[i])) {\n              t = arcs[0], arcs[0] = arcs[i], arcs[i] = t;\n              break;\n            }\n          }\n        }\n\n        return arcs;\n      })\n    };\n  }\n\n  function neighbors(objects) {\n    var indexesByArc = {}, // arc index -> array of object indexes\n        neighbors = objects.map(function() { return []; });\n\n    function line(arcs, i) {\n      arcs.forEach(function(a) {\n        if (a < 0) a = ~a;\n        var o = indexesByArc[a];\n        if (o) o.push(i);\n        else indexesByArc[a] = [i];\n      });\n    }\n\n    function polygon(arcs, i) {\n      arcs.forEach(function(arc) { line(arc, i); });\n    }\n\n    function geometry(o, i) {\n      if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n      else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n    }\n\n    var geometryType = {\n      LineString: line,\n      MultiLineString: polygon,\n      Polygon: polygon,\n      MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n    };\n\n    objects.forEach(geometry);\n\n    for (var i in indexesByArc) {\n      for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n        for (var k = j + 1; k < m; ++k) {\n          var ij = indexes[j], ik = indexes[k], n;\n          if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n          if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n        }\n      }\n    }\n\n    return neighbors;\n  }\n\n  function compareArea(a, b) {\n    return a[1][2] - b[1][2];\n  }\n\n  function minAreaHeap() {\n    var heap = {},\n        array = [],\n        size = 0;\n\n    heap.push = function(object) {\n      up(array[object._ = size] = object, size++);\n      return size;\n    };\n\n    heap.pop = function() {\n      if (size <= 0) return;\n      var removed = array[0], object;\n      if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n      return removed;\n    };\n\n    heap.remove = function(removed) {\n      var i = removed._, object;\n      if (array[i] !== removed) return; // invalid request\n      if (i !== --size) object = array[size], (compareArea(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n      return i;\n    };\n\n    function up(object, i) {\n      while (i > 0) {\n        var j = ((i + 1) >> 1) - 1,\n            parent = array[j];\n        if (compareArea(object, parent) >= 0) break;\n        array[parent._ = i] = parent;\n        array[object._ = i = j] = object;\n      }\n    }\n\n    function down(object, i) {\n      while (true) {\n        var r = (i + 1) << 1,\n            l = r - 1,\n            j = i,\n            child = array[j];\n        if (l < size && compareArea(array[l], child) < 0) child = array[j = l];\n        if (r < size && compareArea(array[r], child) < 0) child = array[j = r];\n        if (j === i) break;\n        array[child._ = i] = child;\n        array[object._ = i = j] = object;\n      }\n    }\n\n    return heap;\n  }\n\n  function presimplify(topology, triangleArea) {\n    var absolute$$ = absolute(topology.transform),\n        relative$$ = relative(topology.transform),\n        heap = minAreaHeap();\n\n    if (!triangleArea) triangleArea = triangle;\n\n    topology.arcs.forEach(function(arc) {\n      var triangles = [],\n          maxArea = 0,\n          triangle,\n          i,\n          n,\n          p;\n\n      // To store each points effective area, we create a new array rather than\n      // extending the passed-in point to workaround a Chrome/V8 bug (getting\n      // stuck in smi mode). For midpoints, the initial effective area of\n      // Infinity will be computed in the next step.\n      for (i = 0, n = arc.length; i < n; ++i) {\n        p = arc[i];\n        absolute$$(arc[i] = [p[0], p[1], Infinity], i);\n      }\n\n      for (i = 1, n = arc.length - 1; i < n; ++i) {\n        triangle = arc.slice(i - 1, i + 2);\n        triangle[1][2] = triangleArea(triangle);\n        triangles.push(triangle);\n        heap.push(triangle);\n      }\n\n      for (i = 0, n = triangles.length; i < n; ++i) {\n        triangle = triangles[i];\n        triangle.previous = triangles[i - 1];\n        triangle.next = triangles[i + 1];\n      }\n\n      while (triangle = heap.pop()) {\n        var previous = triangle.previous,\n            next = triangle.next;\n\n        // If the area of the current point is less than that of the previous point\n        // to be eliminated, use the latter's area instead. This ensures that the\n        // current point cannot be eliminated without eliminating previously-\n        // eliminated points.\n        if (triangle[1][2] < maxArea) triangle[1][2] = maxArea;\n        else maxArea = triangle[1][2];\n\n        if (previous) {\n          previous.next = next;\n          previous[2] = triangle[2];\n          update(previous);\n        }\n\n        if (next) {\n          next.previous = previous;\n          next[0] = triangle[0];\n          update(next);\n        }\n      }\n\n      arc.forEach(relative$$);\n    });\n\n    function update(triangle) {\n      heap.remove(triangle);\n      triangle[1][2] = triangleArea(triangle);\n      heap.push(triangle);\n    }\n\n    return topology;\n  }\n\n  var version = \"1.6.24\";\n\n  exports.version = version;\n  exports.mesh = mesh;\n  exports.meshArcs = meshArcs;\n  exports.merge = merge;\n  exports.mergeArcs = mergeArcs;\n  exports.feature = feature;\n  exports.neighbors = neighbors;\n  exports.presimplify = presimplify;\n\n}));\n\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.vectorTile = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports.VectorTile = require('./lib/vectortile.js');\nmodule.exports.VectorTileFeature = require('./lib/vectortilefeature.js');\nmodule.exports.VectorTileLayer = require('./lib/vectortilelayer.js');\n\n},{\"./lib/vectortile.js\":2,\"./lib/vectortilefeature.js\":3,\"./lib/vectortilelayer.js\":4}],2:[function(require,module,exports){\n'use strict';\n\nvar VectorTileLayer = require('./vectortilelayer');\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n\n},{\"./vectortilelayer\":4}],3:[function(require,module,exports){\n'use strict';\n\nvar Point = require('point-geometry');\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature._id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (!length) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (!length) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type];\n\n    for (var i = 0; i < coords.length; i++) {\n        var line = coords[i];\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    if (type === 'Point' && coords.length === 1) {\n        coords = coords[0][0];\n    } else if (type === 'Point') {\n        coords = coords[0];\n        type = 'MultiPoint';\n    } else if (type === 'LineString' && coords.length === 1) {\n        coords = coords[0];\n    } else if (type === 'LineString') {\n        type = 'MultiLineString';\n    }\n\n    var result = {\n        type: \"Feature\",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if ('_id' in this) {\n        result.id = this._id;\n    }\n\n    return result;\n};\n\n},{\"point-geometry\":5}],4:[function(require,module,exports){\n'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n\n},{\"./vectortilefeature.js\":3}],5:[function(require,module,exports){\n'use strict';\n\nmodule.exports = Point;\n\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n    clone: function() { return new Point(this.x, this.y); },\n\n    add:     function(p) { return this.clone()._add(p);     },\n    sub:     function(p) { return this.clone()._sub(p);     },\n    mult:    function(k) { return this.clone()._mult(k);    },\n    div:     function(k) { return this.clone()._div(k);     },\n    rotate:  function(a) { return this.clone()._rotate(a);  },\n    matMult: function(m) { return this.clone()._matMult(m); },\n    unit:    function() { return this.clone()._unit(); },\n    perp:    function() { return this.clone()._perp(); },\n    round:   function() { return this.clone()._round(); },\n\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    equals: function(p) {\n        return this.x === p.x &&\n               this.y === p.y;\n    },\n\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    // Find the angle of the two vectors, solving the formula for the cross product a x b = |a||b|sin() for .\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n// constructs Point from an array if necessary\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n\n},{}]},{},[1])(1)\n});\n\n\n\n\nL.SVG.Tile = L.SVG.extend({\n\n\tinitialize: function (tileSize, options) {\n\t\tL.SVG.prototype.initialize.call(this, options);\n\t\tthis._size = tileSize;\n\n\t\tthis._initContainer();\n\t\tthis._container.setAttribute('width', this._size.x);\n\t\tthis._container.setAttribute('height', this._size.y);\n\t\tthis._container.setAttribute('viewBox', [0, 0, this._size.x, this._size.y].join(' '));\n\t},\n\n\tgetContainer: function() {\n\t\treturn this._container;\n\t},\n\n// \tonAdd: function() {},\n\tonAdd: L.Util.FalseFn,\n\n\t_initContainer: function() {\n\t\tL.SVG.prototype._initContainer.call(this);\n\t\tvar rect =  L.SVG.create('rect');\n\n// \t\trect.setAttribute('x', 0);\n// \t\trect.setAttribute('y', 0);\n// \t\trect.setAttribute('width', this._size.x);\n// \t\trect.setAttribute('height', this._size.y);\n// \t\trect.setAttribute('fill', 'transparent');\n// \t\trect.setAttribute('stroke', 'black');\n// \t\trect.setAttribute('stroke-width', 2);\n// \t\tthis._rootGroup.appendChild(rect);\n\t},\n\n\t/// TODO: Modify _initPath to include an extra parameter, a group name\n\t/// to order symbolizers by z-index\n\n\t_addPath: function (layer) {\n\t\tthis._rootGroup.appendChild(layer._path);\n\t},\n\n});\n\n\nL.svg.tile = function(tileSize, opts){\n\treturn new L.SVG.Tile(tileSize, opts);\n}\n\n\n\n\n\n\nL.Canvas.Tile = L.Canvas.extend({\n\n\tinitialize: function (tileSize, options) {\n\t\tL.Canvas.prototype.initialize.call(this, options);\n\t\tthis._size = tileSize;\n\n\t\tthis._initContainer();\n\t\tthis._container.setAttribute('width', this._size.x);\n\t\tthis._container.setAttribute('height', this._size.y);\n\t\tthis._layers = {};\n\t\tthis._drawnLayers = {};\n\t},\n\n\tgetContainer: function() {\n\t\treturn this._container;\n\t},\n\n\tonAdd: L.Util.FalseFn,\n\n\t_initContainer: function () {\n\t\tvar container = this._container = document.createElement('canvas');\n\n// \t\tL.DomEvent\n// \t\t\t.on(container, 'mousemove', L.Util.throttle(this._onMouseMove, 32, this), this)\n// \t\t\t.on(container, 'click dblclick mousedown mouseup contextmenu', this._onClick, this)\n// \t\t\t.on(container, 'mouseout', this._handleMouseOut, this);\n\n\t\tthis._ctx = container.getContext('2d');\n\t},\n\n\n\t/// TODO: Modify _initPath to include an extra parameter, a group name\n\t/// to order symbolizers by z-index\n\n});\n\n\nL.canvas.tile = function(tileSize, opts){\n\treturn new L.Canvas.Tile(tileSize, opts);\n}\n\n\n\n\n\n\nL.VectorGrid = L.GridLayer.extend({\n\n\toptions: {\n\t\trendererFactory: L.svg.tile,\n\t\tvectorTileLayerStyles: {}\n\t},\n\n\tcreateTile: function(coords, done) {\n\t\tvar renderer = this.options.rendererFactory(this.getTileSize(), this.options);\n\n\t\tvar vectorTilePromise = this._getVectorTilePromise(coords);\n\n\n\t\tvectorTilePromise.then( function renderTile(vectorTile) {\n\n\t\t\tfor (var layerName in vectorTile.layers) {\n\t\t\t\tvar layer = vectorTile.layers[layerName];\n\n\t\t\t\t/// NOTE: THIS ASSUMES SQUARE TILES!!!!!1!\n\t\t\t\tvar pxPerExtent = this.getTileSize().x / layer.extent;\n\n\t\t\t\tvar layerStyle = this.options.vectorTileLayerStyles[ layerName ] ||\n\t\t\t\tL.Path.prototype.options;\n\n\t\t\t\tfor (var i in layer.features) {\n\t\t\t\t\tvar feat = layer.features[i];\n\n\t\t\t\t\tif (feat.type > 1) { // Lines, polygons\n\n\t\t\t\t\t\tthis._mkFeatureParts(feat, pxPerExtent);\n\n\t\t\t\t\t\t/// Style can be a callback that is passed the feature's\n\t\t\t\t\t\t/// properties and tile zoom level...\n\t\t\t\t\t\tvar styleOptions = (layerStyle instanceof Function) ?\n\t\t\t\t\t\tlayerStyle(feat.properties, coords.z) :\n\t\t\t\t\t\tlayerStyle;\n\n\t\t\t\t\t\tif (!(styleOptions instanceof Array)) {\n\t\t\t\t\t\t\tstyleOptions = [styleOptions];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/// Style can be an array of styles, for styling a feature\n\t\t\t\t\t\t/// more than once...\n\t\t\t\t\t\tfor (var j in styleOptions) {\n\t\t\t\t\t\t\tvar style = L.extend({}, L.Path.prototype.options, styleOptions[j]);\n\n\t\t\t\t\t\t\tif (feat.type === 1) { // Points\n\t\t\t\t\t\t\t\tstyle.fill = false;\n\t\t\t\t\t\t\t} else if (feat.type === 2) {\t// Polyline\n\t\t\t\t\t\t\t\tstyle.fill = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfeat.options = style;\n\t\t\t\t\t\t\trenderer._initPath( feat );\n\t\t\t\t\t\t\trenderer._updateStyle( feat );\n\n\t\t\t\t\t\t\tif (feat.type === 1) { // Points\n\t\t\t\t\t\t\t\t// \t\t\t\t\t\t\tstyle.fill = false;\n\t\t\t\t\t\t\t} else if (feat.type === 2) {\t// Polyline\n\t\t\t\t\t\t\t\tstyle.fill = false;\n\t\t\t\t\t\t\t\trenderer._updatePoly(feat, false);\n\t\t\t\t\t\t\t} else if (feat.type === 3) {\t// Polygon\n\t\t\t\t\t\t\t\trenderer._updatePoly(feat, true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trenderer._addPath( feat );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Feat is a point (type === 1)\n\n\t\t\t\t\t\t/// FIXME!!!\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tL.Util.requestAnimFrame(done);\n\t\t}.bind(this));\n\n\t\treturn renderer.getContainer();\n\t},\n\n\n\n\t// Fills up feat._parts based on the geometry and pxPerExtent,\n\t// pretty much as L.Polyline._projectLatLngs and L.Polyline._clipPoints\n\t// would do but simplified as the vectors are already simplified/clipped.\n\t_mkFeatureParts: function(feat, pxPerExtent) {\n\n\t\tvar rings = feat.geometry;\n\n\t\tfeat._parts = [];\n\t\tfor (var i in rings) {\n\t\t\tvar ring = rings[i];\n\t\t\tvar part = [];\n\t\t\tfor (var j in ring) {\n\t\t\t\tvar coord = ring[j];\n\t\t\t\tif ('x' in coord) {\n\t\t\t\t\t// Protobuf vector tiles return {x: , y:}\n\t\t\t\t\tpart.push(L.point(coord.x * pxPerExtent, coord.y * pxPerExtent));\n\t\t\t\t} else {\n\t\t\t\t\t// Geojson-vt returns [,]\n\t\t\t\t\tpart.push(L.point(coord[0] * pxPerExtent, coord[1] * pxPerExtent));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfeat._parts.push(part);\n\t\t}\n\n\t},\n\n});\n\n\n\nL.vectorGrid = function (options) {\n\treturn new L.VectorGrid(options);\n};\n\n\n\n\n\n\n\n\n\n// geojson-vt powered!\n// NOTE: Assumes the global `geojsonvt` exists!!!\nL.VectorGrid.Slicer = L.VectorGrid.extend({\n\n\toptions: {\n\t\tvectorTileLayerName: 'sliced',\n\t\textent: 4096,\t// Default for geojson-vt\n\t\tmaxZoom: 14  \t// Default for geojson-vt\n\t},\n\n\tinitialize: function(geojson, options) {\n\t\tL.VectorGrid.prototype.initialize.call(this, options);\n\n\n\t\tthis._slicers = {};\n\t\tif (geojson.type && geojson.type === 'Topology') {\n\t\t\t// geojson is really a topojson\n\t\t\tfor (var layerName in geojson.objects) {\n\t\t\t\tthis._slicers[layerName] = geojsonvt(\n\t\t\t\t\ttopojson.feature(geojson, geojson.objects[layerName])\n\t\t\t\t, this.options);\n// \t\t\t\tconsole.log('topojson layer:', layerName);\n\t\t\t}\n\t\t} else {\n\t\t\t// For a geojson, create just one vectortilelayer named with the value\n\t\t\t// of the option.\n\t\t\t// Inherits available options from geojson-vt!\n\t\t\tthis._slicers[this.options.vectorTileLayerName] = geojsonvt(geojson, this.options);\n\t\t}\n\n\t},\n\n\t_getVectorTilePromise: function(coords) {\n\n\t\tvar tileLayers = {};\n\n\t\tfor (var layerName in this._slicers) {\n\t\t\tvar slicer = this._slicers[layerName];\n\t\t\tvar slicedTileLayer = slicer.getTile(coords.z, coords.x, coords.y);\n\n// \t\t\tconsole.log(coords, slicedTileLayer && slicedTileLayer.features && slicedTileLayer.features.length || 0);\n\n\t\t\tif (slicedTileLayer) {\n\t\t\t\tvar vectorTileLayer = {\n\t\t\t\t\tfeatures: [],\n\t\t\t\t\textent: this.options.extent,\n\t\t\t\t\tname: this.options.vectorTileLayerName,\n\t\t\t\t\tlength: slicedTileLayer.features.length\n\t\t\t\t}\n\n\t\t\t\tfor (var i in slicedTileLayer.features) {\n\t\t\t\t\tvar feat = {\n\t\t\t\t\t\tgeometry: slicedTileLayer.features[i].geometry,\n\t\t\t\t\t\tproperties: slicedTileLayer.features[i].tags,\n\t\t\t\t\t\ttype: slicedTileLayer.features[i].type\t// 1 = point, 2 = line, 3 = polygon\n\t\t\t\t\t}\n\t\t\t\t\tvectorTileLayer.features.push(feat);\n\t\t\t\t}\n\n\t\t\t\ttileLayers[layerName] = vectorTileLayer;\n\t\t\t}\n\n\t\t}\n\n\t\treturn new Promise(function(resolve){ return resolve({ layers: tileLayers })});\n\t},\n\n});\n\n\nL.vectorGrid.slicer = function (geojson, options) {\n\treturn new L.VectorGrid.Slicer(geojson, options);\n};\n\n\n\n\n\n// Network & Protobuf powered!\n// NOTE: Assumes the globals `VectorTile` and `Pbf` exist!!!\nL.VectorGrid.Protobuf = L.VectorGrid.extend({\n\n\toptions: {\n\t\tsubdomains: 'abc',\t// Like L.TileLayer\n\t},\n\n\n\tinitialize: function(url, options) {\n\t\t// Inherits options from geojson-vt!\n// \t\tthis._slicer = geojsonvt(geojson, options);\n\t\tthis._url = url;\n\t\tL.VectorGrid.prototype.initialize.call(this, options);\n\t},\n\n\n\t_getSubdomain: L.TileLayer.prototype._getSubdomain,\n\n\n\t_getVectorTilePromise: function(coords) {\n\t\tvar tileUrl = L.Util.template(this._url, L.extend({\n\t\t\ts: this._getSubdomain(coords),\n\t\t\tx: coords.x,\n\t\t\ty: coords.y,\n\t\t\tz: coords.z\n// \t\t\tz: this._getZoomForUrl()\t/// TODO: Maybe replicate TileLayer's maxNativeZoom\n\t\t}, this.options));\n\n\t\treturn fetch(tileUrl).then(function(response){\n\n\t\t\tif (!response.ok) {\n\t\t\t\treturn {layers:[]};\n\t\t\t}\n\n\t\t\treturn response.blob().then( function (blob) {\n// \t\t\t\tconsole.log(blob);\n\n\t\t\t\tvar reader = new FileReader();\n\t\t\t\treturn new Promise(function(resolve){\n\t\t\t\t\treader.addEventListener(\"loadend\", function() {\n\t\t\t\t\t\t// reader.result contains the contents of blob as a typed array\n\n\t\t\t\t\t\t// blob.type === 'application/x-protobuf'\n\t\t\t\t\t\tvar pbf = new Pbf( reader.result );\n// \t\t\t\t\t\tconsole.log(pbf);\n\t\t\t\t\t\treturn resolve(new vectorTile.VectorTile( pbf ));\n\n\t\t\t\t\t});\n\t\t\t\t\treader.readAsArrayBuffer(blob);\n\t\t\t\t});\n\t\t\t});\n\t\t}).then(function(json){\n\n// \t\t\tconsole.log('Vector tile:', json.layers);\n// \t\t\tconsole.log('Vector tile water:', json.layers.water);\t// Instance of VectorTileLayer\n\n\t\t\t// Normalize feature getters into actual instanced features\n\t\t\tfor (var layerName in json.layers) {\n\t\t\t\tvar feats = [];\n\n\t\t\t\tfor (var i=0; i<json.layers[layerName].length; i++) {\n\t\t\t\t\tvar feat = json.layers[layerName].feature(i);\n\t\t\t\t\tfeat.geometry = feat.loadGeometry();\n\t\t\t\t\tfeats.push(feat);\n\t\t\t\t}\n\n\t\t\t\tjson.layers[layerName].features = feats;\n\t\t\t}\n\n\t\t\treturn json;\n\t\t});\n\t}\n});\n\n\nL.vectorGrid.protobuf = function (url, options) {\n\treturn new L.VectorGrid.Protobuf(url, options);\n};\n\n\n\n\n\n\n//# sourceMappingURL=/home/ivan/devel/Leaflet.VectorGrid/.gobble-watch/03-concat/226/Leaflet.VectorGrid.bundled.js.map\n"]}