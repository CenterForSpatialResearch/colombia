L.SVG.Tile=L.SVG.extend({initialize:function(t,e){L.SVG.prototype.initialize.call(this,e),this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" "))},getContainer:function(){return this._container},onAdd:L.Util.FalseFn,_initContainer:function(){L.SVG.prototype._initContainer.call(this);L.SVG.create("rect")},_addPath:function(t){this._rootGroup.appendChild(t._path)}}),L.svg.tile=function(t,e){return new L.SVG.Tile(t,e)},L.Canvas.Tile=L.Canvas.extend({initialize:function(t,e){L.Canvas.prototype.initialize.call(this,e),this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={}},getContainer:function(){return this._container},onAdd:L.Util.FalseFn,_initContainer:function(){var t=this._container=document.createElement("canvas");this._ctx=t.getContext("2d")}}),L.canvas.tile=function(t,e){return new L.Canvas.Tile(t,e)},L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{}},createTile:function(t,e){var i=this.options.rendererFactory(this.getTileSize(),this.options),r=this._getVectorTilePromise(t);return r.then(function(r){for(var n in r.layers){var o=r.layers[n],s=this.getTileSize().x/o.extent,a=this.options.vectorTileLayerStyles[n]||L.Path.prototype.options;for(var l in o.features){var c=o.features[l];if(c.type>1){this._mkFeatureParts(c,s);var u=a instanceof Function?a(c.properties,t.z):a;u instanceof Array||(u=[u]);for(var h in u){var p=L.extend({},L.Path.prototype.options,u[h]);1===c.type?p.fill=!1:2===c.type&&(p.fill=!1),c.options=p,i._initPath(c),i._updateStyle(c),1===c.type||(2===c.type?(p.fill=!1,i._updatePoly(c,!1)):3===c.type&&i._updatePoly(c,!0)),i._addPath(c)}}}}L.Util.requestAnimFrame(e)}.bind(this)),i.getContainer()},_mkFeatureParts:function(t,e){var i=t.geometry;t._parts=[];for(var r in i){var n=i[r],o=[];for(var s in n){var a=n[s];"x"in a?o.push(L.point(a.x*e,a.y*e)):o.push(L.point(a[0]*e,a[1]*e))}t._parts.push(o)}}}),L.vectorGrid=function(t){return new L.VectorGrid(t)},L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},initialize:function(t,e){if(L.VectorGrid.prototype.initialize.call(this,e),this._slicers={},t.type&&"Topology"===t.type)for(var i in t.objects)this._slicers[i]=geojsonvt(topojson.feature(t,t.objects[i]),this.options);else this._slicers[this.options.vectorTileLayerName]=geojsonvt(t,this.options)},_getVectorTilePromise:function(t){var e={};for(var i in this._slicers){var r=this._slicers[i],n=r.getTile(t.z,t.x,t.y);if(n){var o={features:[],extent:this.options.extent,name:this.options.vectorTileLayerName,length:n.features.length};for(var s in n.features){var a={geometry:n.features[s].geometry,properties:n.features[s].tags,type:n.features[s].type};o.features.push(a)}e[i]=o}}return new Promise(function(t){return t({layers:e})})}}),L.vectorGrid.slicer=function(t,e){return new L.VectorGrid.Slicer(t,e)},L.VectorGrid.Protobuf=L.VectorGrid.extend({options:{subdomains:"abc"},initialize:function(t,e){this._url=t,L.VectorGrid.prototype.initialize.call(this,e)},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(t){var e=L.Util.template(this._url,L.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:t.z},this.options));return fetch(e).then(function(t){return t.ok?t.blob().then(function(t){var e=new FileReader;return new Promise(function(i){e.addEventListener("loadend",function(){var t=new Pbf(e.result);return i(new vectorTile.VectorTile(t))}),e.readAsArrayBuffer(t)})}):{layers:[]}}).then(function(t){for(var e in t.layers){for(var i=[],r=0;r<t.layers[e].length;r++){var n=t.layers[e].feature(r);n.geometry=n.loadGeometry(),i.push(n)}t.layers[e].features=i}return t})}}),L.vectorGrid.protobuf=function(t,e){return new L.VectorGrid.Protobuf(t,e)};
//# sourceMappingURL=/home/ivan/devel/Leaflet.VectorGrid/.gobble-watch/07-uglifyjs/.cache/Leaflet.VectorGrid.js.map
