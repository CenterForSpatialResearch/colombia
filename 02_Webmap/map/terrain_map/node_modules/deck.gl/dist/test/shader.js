'use strict';

require('babel-polyfill');

var _global = require('global');

var _luma = require('luma.gl');

var _assembleShaders = require('../shader-utils/assemble-shaders');

// Copyright (c) 2016 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

// TODO - need to clean up this code to follow lint rules, disable for now
/* eslint-disable */
var glslify = require('glslify');

// Utilities functions that to be moved to a common place for future tests

function glEnumToString(gl, value) {
  // Optimization for the most common enum:
  if (value === gl.NO_ERROR) {
    return "NO_ERROR";
  }
  for (var p in gl) {
    if (gl[p] == value) {
      return p;
    }
  }
  return "0x" + value.toString(16);
};

function addSpan(contents, div) {
  if (div == undefined) {
    var divs = _global.document.body.getElementsByClassName("testInfo");
    var lastDiv = divs[divs.length - 1];
    div = lastDiv;
  }

  var span = _global.document.createElement("span");
  div.appendChild(span);
  span.innerHTML = contents + '<br />';
}

function addDiv(contents) {
  var testInfoDiv = _global.document.createElement("div");
  _global.document.body.appendChild(testInfoDiv);
  testInfoDiv.setAttribute("class", "testInfo");

  return testInfoDiv;
}

function logToConsole(msg) {
  if (_global.window.console) _global.window.console.log(msg);
}

function escapeHTML(text) {
  return text.replace(/&/g, "&amp;").replace(/</g, "&lt;");
}

function testPassed(msg) {
  addSpan('<span><span class="pass" style="color:green">PASS</span> ' + escapeHTML(msg) + '</span>');
  logToConsole('PASS ' + msg);
}

function testFailed(msg) {
  addSpan('<span><span class="fail" style="color:red">FAIL</span> ' + escapeHTML(msg) + '</span>');
  logToConsole('FAIL ' + msg);
}

function glErrorShouldBe(gl, glErrors, opt_msg) {
  if (!glErrors.length) {
    glErrors = [glErrors];
  }
  opt_msg = opt_msg || "";
  var err = gl.getError();
  var ndx = glErrors.indexOf(err);
  var errStrs = [];
  for (var ii = 0; ii < glErrors.length; ++ii) {
    errStrs.push(glEnumToString(gl, glErrors[ii]));
  }
  var expected = errStrs.join(" or ");
  if (ndx < 0) {
    var msg = "getError expected" + (glErrors.length > 1 ? " one of: " : ": ");
    testFailed(msg + expected + ". Was " + glEnumToString(gl, err) + " : " + opt_msg);
  } else {
    //var msg = "getError was " + ((glErrors.length > 1) ? "one of: " : "expected value: ");
    //testPassed(msg + expected + " : " + opt_msg);
  }
};

// Special utility functions for df64 tests

function fp64ify(a) {
  var a_hi = Math.fround(a);
  var a_lo = a - Math.fround(a);
  return new Float32Array([a_hi, a_lo]);
}

function getFloat64() {
  var upper = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 256;

  return Math.random() * Math.pow(2.0, (Math.random() - 0.5) * upper);
}

function getVec4Float64() {
  return [getFloat64(), getFloat64(), getFloat64(), getFloat64()];
}

function getMat4Float64() {
  var result = [];
  for (var i = 0; i < 16; i++) {
    result.push(getFloat64());
  }
  return result;
}

function initializeGL(canvas) {
  var gl = (0, _luma.createGLContext)(canvas);
  gl.viewport(0, 0, canvas.width, canvas.height);
  gl.clearColor(0, 0, 0, 1);
  gl.clearDepth(1);
  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

  var fp_texture_support = gl.getExtension('OES_texture_float');
  if (!fp_texture_support) {
    console.error("no floating point texture support!");
  }
  return gl;
}

function initializeTexTarget(gl) {
  var framebuffer = gl.createFramebuffer();
  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);
  framebuffer.width = 10;
  framebuffer.height = 10;

  var tex = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, tex);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, framebuffer.width, framebuffer.height, 0, gl.RGBA, gl.FLOAT, null);

  var renderbuffer = gl.createRenderbuffer();
  gl.bindRenderbuffer(gl.RENDERBUFFER, renderbuffer);
  gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, framebuffer.width, framebuffer.height);
  gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tex, 0);
  gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, renderbuffer);
}

function render(gl) {
  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

  glErrorShouldBe(gl, gl.NO_ERROR, "no error from draw");
}

function getGPUOutput(gl) {

  var width = gl.canvas.width;
  var height = gl.canvas.height;
  var buf = new Float32Array(width * height * 4);

  gl.readPixels(0, 0, width, height, gl.RGBA, gl.FLOAT, buf);

  return buf;
}

function checkError(result, reference) {
  var currentDiv = addDiv();
  var line;
  addSpan("------------------------", currentDiv);

  var referece64 = reference[0] + reference[1];
  var result64 = result[0] + result[1];

  line = 'CPU output: (' + reference[0].toString() + ',' + reference[1].toString() + ') = ' + referece64.toString() + '<br>';
  addSpan(line, currentDiv);
  line = "GPU output: (" + result[0].toString() + ',' + result[1].toString() + ',' + result[2].toString() + ',' + result[3].toString() + ') = ' + result64.toString() + '<br>';
  addSpan(line, currentDiv);

  line = "error: " + Math.abs((referece64 - result64) / referece64) + '<br>';
  addSpan(line, currentDiv);

  // var referenceBits = new Int32Array(reference.buffer);
  // var resultBits = new Int32Array(result.buffer);

  // var refHiExp = (referenceBits[0] & 0x7F800000) >>> 23;
  // var refLoExp = (referenceBits[1] & 0x7F800000) >>> 23;
  // var resHiExp = (resultBits[0] & 0x7F800000) >>> 23;
  // var resLoExp = (resultBits[1] & 0x7F800000) >>> 23;

  // var refHiMan = referenceBits[0] & 0x007FFFFF;
  // var refLoMan = referenceBits[1] & 0x007FFFFF;
  // var resHiMan = resultBits[0] & 0x007FFFFF;
  // var resLoMan = resultBits[1] & 0x007FFFFF;

  // if (refHiExp !== resHiExp || refLoExp !== resLoExp)
  // {
  //   line = "High 8-bit exponent error: " + Math.abs(refHiExp - resHiExp).toString() + " ulp<br>";
  //   addSpan(line, currentDiv);
  //   line = "Low 8-bit exponent error: " + Math.abs(refLoExp - resLoExp).toString() + " ulp<br>";
  //   addSpan(line, currentDiv);
  // }

  // line = "High 24-bit mantissa reference: " + refHiMan.toString(2) + " result: " + resHiMan.toString(2) + " error: " + Math.abs(refHiMan - resHiMan).toString() + " ulp<br>";
  // addSpan(line, currentDiv);
  // line = "Low 24-bit mantissa reference: " + refLoMan.toString(2) + " result: " + resLoMan.toString(2) + " error: " + Math.abs(refLoMan - resLoMan).toString() + " ulp<br>";
  // addSpan(line, currentDiv);
}

// Actual tests for different arithmetic functions

function test_float_add(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // float +
  var float0 = getFloat64();
  var float1 = getFloat64();
  var float_ref = float0 + float1;

  var float0_vec2 = fp64ify(float0);
  var float1_vec2 = fp64ify(float1);
  var float_ref_vec2 = fp64ify(float_ref);
  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nuniform vec2 b;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = sum_fp64(a, b);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));
  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    b: float1_vec2,
    ONE: 1.0
  });

  var line;
  line = "(" + float0_vec2.toString() + ') + (' + float1_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_sub(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // float -
  var float0 = getFloat64();
  var float1 = getFloat64();
  var float_ref = float0 - float1;

  var float0_vec2 = fp64ify(float0);
  var float1_vec2 = fp64ify(float1);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nuniform vec2 b;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = sub_fp64(a, b);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    b: float1_vec2,
    ONE: 1.0
  });

  var line;
  line = "(" + float0_vec2.toString() + ') - (' + float1_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_mul(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // float x
  var float0 = getFloat64(128);
  var float1 = getFloat64(128);

  var float_ref = float0 * float1;

  var float0_vec2 = fp64ify(float0);
  var float1_vec2 = fp64ify(float1);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nuniform vec2 b;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = mul_fp64(a, b);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    b: float1_vec2,
    ONE: 1.0
  });

  var line;
  line = "(" + float0_vec2.toString() + ') * (' + float1_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_div(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // float /
  var float0 = getFloat64(128);
  var float1 = getFloat64(128);
  var float_ref = float0 / float1;

  var float0_vec2 = fp64ify(float0);
  var float1_vec2 = fp64ify(float1);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nuniform vec2 b;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = div_fp64(a, b);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    b: float1_vec2,
    ONE: 1.0
  });

  var line;
  line = "(" + float0_vec2.toString() + ') / (' + float1_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_sqrt(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // sqrt
  var float0 = getFloat64(128);
  var float_ref = Math.sqrt(float0);

  var float0_vec2 = fp64ify(float0);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = sqrt_fp64(a);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    ONE: 1.0
  });

  var line;
  line = "sqrt(" + float0_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_exp(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // exp
  var float0 = getFloat64(6);
  var float_ref = Math.exp(float0);

  var float0_vec2 = fp64ify(float0);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = exp_fp64(a);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    ONE: 1.0
  });

  var line;
  line = "exp(" + float0_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_log(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // log
  var float0 = getFloat64(24);
  var float_ref = Math.log(float0);

  var float0_vec2 = fp64ify(float0);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = log_fp64(a);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    ONE: 1.0
  });

  var line;
  line = "log(" + float0_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_sin(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // sin
  var float0 = getFloat64(3);
  var float_ref = Math.sin(float0);

  var float0_vec2 = fp64ify(float0);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = sin_fp64(a);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    ONE: 1.0
  });

  var line;
  line = "sin(" + float0_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_cos(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // cos
  var float0 = getFloat64(3);
  var float_ref = Math.cos(float0);

  var float0_vec2 = fp64ify(float0);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = cos_fp64(a);\n  vColor = vec4(result.x, result.y, 0.0, 1.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    ONE: 1.0
  });

  var line;
  line = "cos(" + float0_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

function test_float_tan(gl, testName) {
  var currentDiv = addDiv();
  addSpan(testName, currentDiv);

  // tan
  var float0 = getFloat64(3);
  var float_ref = Math.tan(float0);

  var float0_vec2 = fp64ify(float0);
  var float_ref_vec2 = fp64ify(float_ref);

  var program = new _luma.Program(gl, (0, _assembleShaders.assembleShaders)(gl, {
    vs: '#define GLSLIFY 1\nattribute vec3 positions;\n\nuniform vec2 a;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4(positions, 1.0);\n  vec2 result = tan_fp64(a);\n  vColor = vec4(result.x, result.y, 0.0, 0.0);\n}\n',
    fs: '#ifdef GL_ES\nprecision highp float;\n#define GLSLIFY 1\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
    fp64: true,
    project64: true
  }));

  program.use();
  program.setBuffers({
    positions: new _luma.Buffer(gl).setData({
      data: new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]),
      size: 2
    })
  }).setUniforms({
    a: float0_vec2,
    ONE: 1.0
  });

  var line;
  line = "tan(" + float0_vec2.toString() + ')<br>';
  addSpan(line, currentDiv);
  return float_ref_vec2;
}

// Main entrance
_global.window.onload = function () {
  var canvas = _global.document.createElement('canvas');
  _global.document.body.appendChild(canvas);

  canvas.width = 16;
  canvas.height = 16;

  // Initialize GL

  var gl = initializeGL(canvas);
  initializeTexTarget(gl);

  var idx0;
  var test_no = 0;
  var loop = 20;

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_add(gl, "Float addition test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_sub(gl, "Float subtraction test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_mul(gl, "Float multiplication test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_div(gl, "Float division test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_sqrt(gl, "Float sqrt test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_exp(gl, "Float exp test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_log(gl, "Float log test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_sin(gl, "Float sin test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_cos(gl, "Float cos test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }

  for (idx0 = 0; idx0 < loop; idx0++) {
    var currentDiv = addDiv();
    addSpan("------------------------", currentDiv);
    addSpan("Loop No. " + test_no++, currentDiv);

    var cpu_result = test_float_tan(gl, "Float tan test");

    render(gl);

    var gpu_result = getGPUOutput(gl);

    checkError(gpu_result, cpu_result);

    addSpan("------------------------", currentDiv);
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L3NoYWRlci5qcyJdLCJuYW1lcyI6WyJnbHNsaWZ5IiwicmVxdWlyZSIsImdsRW51bVRvU3RyaW5nIiwiZ2wiLCJ2YWx1ZSIsIk5PX0VSUk9SIiwicCIsInRvU3RyaW5nIiwiYWRkU3BhbiIsImNvbnRlbnRzIiwiZGl2IiwidW5kZWZpbmVkIiwiZGl2cyIsImJvZHkiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGFzdERpdiIsImxlbmd0aCIsInNwYW4iLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJhZGREaXYiLCJ0ZXN0SW5mb0RpdiIsInNldEF0dHJpYnV0ZSIsImxvZ1RvQ29uc29sZSIsIm1zZyIsImNvbnNvbGUiLCJsb2ciLCJlc2NhcGVIVE1MIiwidGV4dCIsInJlcGxhY2UiLCJ0ZXN0UGFzc2VkIiwidGVzdEZhaWxlZCIsImdsRXJyb3JTaG91bGRCZSIsImdsRXJyb3JzIiwib3B0X21zZyIsImVyciIsImdldEVycm9yIiwibmR4IiwiaW5kZXhPZiIsImVyclN0cnMiLCJpaSIsInB1c2giLCJleHBlY3RlZCIsImpvaW4iLCJmcDY0aWZ5IiwiYSIsImFfaGkiLCJNYXRoIiwiZnJvdW5kIiwiYV9sbyIsIkZsb2F0MzJBcnJheSIsImdldEZsb2F0NjQiLCJ1cHBlciIsInJhbmRvbSIsInBvdyIsImdldFZlYzRGbG9hdDY0IiwiZ2V0TWF0NEZsb2F0NjQiLCJyZXN1bHQiLCJpIiwiaW5pdGlhbGl6ZUdMIiwiY2FudmFzIiwidmlld3BvcnQiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyQ29sb3IiLCJjbGVhckRlcHRoIiwiY2xlYXIiLCJDT0xPUl9CVUZGRVJfQklUIiwiREVQVEhfQlVGRkVSX0JJVCIsImZwX3RleHR1cmVfc3VwcG9ydCIsImdldEV4dGVuc2lvbiIsImVycm9yIiwiaW5pdGlhbGl6ZVRleFRhcmdldCIsImZyYW1lYnVmZmVyIiwiY3JlYXRlRnJhbWVidWZmZXIiLCJiaW5kRnJhbWVidWZmZXIiLCJGUkFNRUJVRkZFUiIsInRleCIsImNyZWF0ZVRleHR1cmUiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiTkVBUkVTVCIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsInRleEltYWdlMkQiLCJSR0JBIiwiRkxPQVQiLCJyZW5kZXJidWZmZXIiLCJjcmVhdGVSZW5kZXJidWZmZXIiLCJiaW5kUmVuZGVyYnVmZmVyIiwiUkVOREVSQlVGRkVSIiwicmVuZGVyYnVmZmVyU3RvcmFnZSIsIkRFUFRIX0NPTVBPTkVOVDE2IiwiZnJhbWVidWZmZXJUZXh0dXJlMkQiLCJDT0xPUl9BVFRBQ0hNRU5UMCIsImZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyIiwiREVQVEhfQVRUQUNITUVOVCIsInJlbmRlciIsImRyYXdBcnJheXMiLCJUUklBTkdMRV9TVFJJUCIsImdldEdQVU91dHB1dCIsImJ1ZiIsInJlYWRQaXhlbHMiLCJjaGVja0Vycm9yIiwicmVmZXJlbmNlIiwiY3VycmVudERpdiIsImxpbmUiLCJyZWZlcmVjZTY0IiwicmVzdWx0NjQiLCJhYnMiLCJ0ZXN0X2Zsb2F0X2FkZCIsInRlc3ROYW1lIiwiZmxvYXQwIiwiZmxvYXQxIiwiZmxvYXRfcmVmIiwiZmxvYXQwX3ZlYzIiLCJmbG9hdDFfdmVjMiIsImZsb2F0X3JlZl92ZWMyIiwicHJvZ3JhbSIsInZzIiwiZnMiLCJmcDY0IiwicHJvamVjdDY0IiwidXNlIiwic2V0QnVmZmVycyIsInBvc2l0aW9ucyIsInNldERhdGEiLCJkYXRhIiwic2l6ZSIsInNldFVuaWZvcm1zIiwiYiIsIk9ORSIsInRlc3RfZmxvYXRfc3ViIiwidGVzdF9mbG9hdF9tdWwiLCJ0ZXN0X2Zsb2F0X2RpdiIsInRlc3RfZmxvYXRfc3FydCIsInNxcnQiLCJ0ZXN0X2Zsb2F0X2V4cCIsImV4cCIsInRlc3RfZmxvYXRfbG9nIiwidGVzdF9mbG9hdF9zaW4iLCJzaW4iLCJ0ZXN0X2Zsb2F0X2NvcyIsImNvcyIsInRlc3RfZmxvYXRfdGFuIiwidGFuIiwib25sb2FkIiwiaWR4MCIsInRlc3Rfbm8iLCJsb29wIiwiY3B1X3Jlc3VsdCIsImdwdV9yZXN1bHQiXSwibWFwcGluZ3MiOiI7O0FBc0JBOztBQUNBOztBQUNBOztBQUNBOztBQXpCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBTUEsSUFBTUEsVUFBVUMsUUFBUSxTQUFSLENBQWhCOztBQUVBOztBQUVBLFNBQVNDLGNBQVQsQ0FBd0JDLEVBQXhCLEVBQTRCQyxLQUE1QixFQUFtQztBQUNqQztBQUNBLE1BQUlBLFVBQVVELEdBQUdFLFFBQWpCLEVBQTJCO0FBQ3pCLFdBQU8sVUFBUDtBQUNEO0FBQ0QsT0FBSyxJQUFJQyxDQUFULElBQWNILEVBQWQsRUFBa0I7QUFDaEIsUUFBSUEsR0FBR0csQ0FBSCxLQUFTRixLQUFiLEVBQW9CO0FBQ2xCLGFBQU9FLENBQVA7QUFDRDtBQUNGO0FBQ0QsU0FBTyxPQUFPRixNQUFNRyxRQUFOLENBQWUsRUFBZixDQUFkO0FBQ0Q7O0FBRUQsU0FBU0MsT0FBVCxDQUFpQkMsUUFBakIsRUFBMkJDLEdBQTNCLEVBQWdDO0FBQzlCLE1BQUlBLE9BQU9DLFNBQVgsRUFBc0I7QUFDcEIsUUFBSUMsT0FBTyxpQkFBU0MsSUFBVCxDQUFjQyxzQkFBZCxDQUFxQyxVQUFyQyxDQUFYO0FBQ0EsUUFBSUMsVUFBVUgsS0FBS0EsS0FBS0ksTUFBTCxHQUFjLENBQW5CLENBQWQ7QUFDQU4sVUFBTUssT0FBTjtBQUNEOztBQUVELE1BQUlFLE9BQU8saUJBQVNDLGFBQVQsQ0FBdUIsTUFBdkIsQ0FBWDtBQUNBUixNQUFJUyxXQUFKLENBQWdCRixJQUFoQjtBQUNBQSxPQUFLRyxTQUFMLEdBQWlCWCxXQUFXLFFBQTVCO0FBQ0Q7O0FBRUQsU0FBU1ksTUFBVCxDQUFnQlosUUFBaEIsRUFBMEI7QUFDeEIsTUFB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RUFBaUMzQyxVQUFqQzs7QUFHQSxRQUFJNkMsYUFBYU4sZUFBZS9JLEVBQWYsRUFBbUIsZ0JBQW5CLENBQWpCOztBQUVBZ0csV0FBT2hHLEVBQVA7O0FBRUEsUUFBSXNKLGFBQWFuRCxhQUFhbkcsRUFBYixDQUFqQjs7QUFFQXNHLGVBQVdnRCxVQUFYLEVBQXVCRCxVQUF2Qjs7QUFFQWhKLFlBQVEsMEJBQVIsRUFBb0NtRyxVQUFwQztBQUNEO0FBRUYsQ0FuTEQiLCJmaWxlIjoic2hhZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE2IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuLy8gVE9ETyAtIG5lZWQgdG8gY2xlYW4gdXAgdGhpcyBjb2RlIHRvIGZvbGxvdyBsaW50IHJ1bGVzLCBkaXNhYmxlIGZvciBub3dcbi8qIGVzbGludC1kaXNhYmxlICovXG5pbXBvcnQgJ2JhYmVsLXBvbHlmaWxsJztcbmltcG9ydCB7ZG9jdW1lbnQsIHdpbmRvd30gZnJvbSAnZ2xvYmFsJztcbmltcG9ydCB7QnVmZmVyLCBjcmVhdGVHTENvbnRleHQsIFByb2dyYW19IGZyb20gJ2x1bWEuZ2wnO1xuaW1wb3J0IHthc3NlbWJsZVNoYWRlcnN9IGZyb20gJy4uL3NoYWRlci11dGlscy9hc3NlbWJsZS1zaGFkZXJzJztcblxuY29uc3QgZ2xzbGlmeSA9IHJlcXVpcmUoJ2dsc2xpZnknKTtcblxuLy8gVXRpbGl0aWVzIGZ1bmN0aW9ucyB0aGF0IHRvIGJlIG1vdmVkIHRvIGEgY29tbW9uIHBsYWNlIGZvciBmdXR1cmUgdGVzdHNcblxuZnVuY3Rpb24gZ2xFbnVtVG9TdHJpbmcoZ2wsIHZhbHVlKSB7XG4gIC8vIE9wdGltaXphdGlvbiBmb3IgdGhlIG1vc3QgY29tbW9uIGVudW06XG4gIGlmICh2YWx1ZSA9PT0gZ2wuTk9fRVJST1IpIHtcbiAgICByZXR1cm4gXCJOT19FUlJPUlwiO1xuICB9XG4gIGZvciAodmFyIHAgaW4gZ2wpIHtcbiAgICBpZiAoZ2xbcF0gPT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gXCIweFwiICsgdmFsdWUudG9TdHJpbmcoMTYpO1xufTtcblxuZnVuY3Rpb24gYWRkU3Bhbihjb250ZW50cywgZGl2KSB7XG4gIGlmIChkaXYgPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0ZXN0SW5mb1wiKTtcbiAgICB2YXIgbGFzdERpdiA9IGRpdnNbZGl2cy5sZW5ndGggLSAxXTtcbiAgICBkaXYgPSBsYXN0RGl2O1xuICB9XG5cbiAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgZGl2LmFwcGVuZENoaWxkKHNwYW4pO1xuICBzcGFuLmlubmVySFRNTCA9IGNvbnRlbnRzICsgJzxiciAvPic7XG59XG5cbmZ1bmN0aW9uIGFkZERpdihjb250ZW50cykge1xuICB2YXIgdGVzdEluZm9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlc3RJbmZvRGl2KTtcbiAgdGVzdEluZm9EaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0ZXN0SW5mb1wiKTtcblxuICByZXR1cm4gdGVzdEluZm9EaXY7XG59XG5cbmZ1bmN0aW9uIGxvZ1RvQ29uc29sZShtc2cpIHtcbiAgaWYgKHdpbmRvdy5jb25zb2xlKVxuICAgIHdpbmRvdy5jb25zb2xlLmxvZyhtc2cpO1xufVxuXG5mdW5jdGlvbiBlc2NhcGVIVE1MKHRleHQpIHtcbiAgcmV0dXJuIHRleHQucmVwbGFjZSgvJi9nLCBcIiZhbXA7XCIpLnJlcGxhY2UoLzwvZywgXCImbHQ7XCIpO1xufVxuXG5mdW5jdGlvbiB0ZXN0UGFzc2VkKG1zZykge1xuICBhZGRTcGFuKCc8c3Bhbj48c3BhbiBjbGFzcz1cInBhc3NcIiBzdHlsZT1cImNvbG9yOmdyZWVuXCI+UEFTUzwvc3Bhbj4gJyArIGVzY2FwZUhUTUwobXNnKSArICc8L3NwYW4+Jyk7XG4gIGxvZ1RvQ29uc29sZSgnUEFTUyAnICsgbXNnKTtcbn1cblxuZnVuY3Rpb24gdGVzdEZhaWxlZChtc2cpIHtcbiAgYWRkU3BhbignPHNwYW4+PHNwYW4gY2xhc3M9XCJmYWlsXCIgc3R5bGU9XCJjb2xvcjpyZWRcIj5GQUlMPC9zcGFuPiAnICsgZXNjYXBlSFRNTChtc2cpICsgJzwvc3Bhbj4nKTtcbiAgbG9nVG9Db25zb2xlKCdGQUlMICcgKyBtc2cpO1xufVxuXG5mdW5jdGlvbiBnbEVycm9yU2hvdWxkQmUoZ2wsIGdsRXJyb3JzLCBvcHRfbXNnKSB7XG4gIGlmICghZ2xFcnJvcnMubGVuZ3RoKSB7XG4gICAgZ2xFcnJvcnMgPSBbZ2xFcnJvcnNdO1xuICB9XG4gIG9wdF9tc2cgPSBvcHRfbXNnIHx8IFwiXCI7XG4gIHZhciBlcnIgPSBnbC5nZXRFcnJvcigpO1xuICB2YXIgbmR4ID0gZ2xFcnJvcnMuaW5kZXhPZihlcnIpO1xuICB2YXIgZXJyU3RycyA9IFtdO1xuICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgZ2xFcnJvcnMubGVuZ3RoOyArK2lpKSB7XG4gICAgZXJyU3Rycy5wdXNoKGdsRW51bVRvU3RyaW5nKGdsLCBnbEVycm9yc1tpaV0pKTtcbiAgfVxuICB2YXIgZXhwZWN0ZWQgPSBlcnJTdHJzLmpvaW4oXCIgb3IgXCIpO1xuICBpZiAobmR4IDwgMCkge1xuICAgIHZhciBtc2cgPSBcImdldEVycm9yIGV4cGVjdGVkXCIgKyAoKGdsRXJyb3JzLmxlbmd0aCA+IDEpID8gXCIgb25lIG9mOiBcIiA6IFwiOiBcIik7XG4gICAgdGVzdEZhaWxlZChtc2cgKyBleHBlY3RlZCArICBcIi4gV2FzIFwiICsgZ2xFbnVtVG9TdHJpbmcoZ2wsIGVycikgKyBcIiA6IFwiICsgb3B0X21zZyk7XG4gIH0gZWxzZSB7XG4gICAgLy92YXIgbXNnID0gXCJnZXRFcnJvciB3YXMgXCIgKyAoKGdsRXJyb3JzLmxlbmd0aCA+IDEpID8gXCJvbmUgb2Y6IFwiIDogXCJleHBlY3RlZCB2YWx1ZTogXCIpO1xuICAgIC8vdGVzdFBhc3NlZChtc2cgKyBleHBlY3RlZCArIFwiIDogXCIgKyBvcHRfbXNnKTtcbiAgfVxufTtcblxuLy8gU3BlY2lhbCB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZGY2NCB0ZXN0c1xuXG5mdW5jdGlvbiBmcDY0aWZ5KGEpIHtcbiAgY29uc3QgYV9oaSA9IE1hdGguZnJvdW5kKGEpO1xuICBjb25zdCBhX2xvID0gYSAtIE1hdGguZnJvdW5kKGEpO1xuICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbYV9oaSwgYV9sb10pO1xufVxuXG5mdW5jdGlvbiBnZXRGbG9hdDY0KHVwcGVyID0gMjU2KSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMi4wLCAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB1cHBlcik7XG59XG5cbmZ1bmN0aW9uIGdldFZlYzRGbG9hdDY0KCkge1xuICByZXR1cm4gW2dldEZsb2F0NjQoKSwgZ2V0RmxvYXQ2NCgpLCBnZXRGbG9hdDY0KCksIGdldEZsb2F0NjQoKV1cbn1cblxuZnVuY3Rpb24gZ2V0TWF0NEZsb2F0NjQoKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKVxuICB7XG4gICAgcmVzdWx0LnB1c2goZ2V0RmxvYXQ2NCgpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplR0woY2FudmFzKVxue1xuICBjb25zdCBnbCA9IGNyZWF0ZUdMQ29udGV4dChjYW52YXMpO1xuICBnbC52aWV3cG9ydCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICBnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDEpO1xuICBnbC5jbGVhckRlcHRoKDEpO1xuICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgdmFyIGZwX3RleHR1cmVfc3VwcG9ydCA9IGdsLmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKTtcbiAgaWYgKCFmcF90ZXh0dXJlX3N1cHBvcnQpXG4gIHtcbiAgICBjb25zb2xlLmVycm9yKFwibm8gZmxvYXRpbmcgcG9pbnQgdGV4dHVyZSBzdXBwb3J0IVwiKTtcbiAgfVxuICByZXR1cm4gZ2w7XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVUZXhUYXJnZXQoZ2wpXG57XG4gIHZhciBmcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXIpO1xuICBmcmFtZWJ1ZmZlci53aWR0aCA9IDEwO1xuICBmcmFtZWJ1ZmZlci5oZWlnaHQgPSAxMDtcblxuICB2YXIgdGV4ID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXgpO1xuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcblxuICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGZyYW1lYnVmZmVyLndpZHRoLCBmcmFtZWJ1ZmZlci5oZWlnaHQsIDAsIGdsLlJHQkEsIGdsLkZMT0FULCBudWxsKTtcblxuICB2YXIgcmVuZGVyYnVmZmVyID0gZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCk7XG4gIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCByZW5kZXJidWZmZXIpO1xuICBnbC5yZW5kZXJidWZmZXJTdG9yYWdlKGdsLlJFTkRFUkJVRkZFUiwgZ2wuREVQVEhfQ09NUE9ORU5UMTYsIGZyYW1lYnVmZmVyLndpZHRoLCBmcmFtZWJ1ZmZlci5oZWlnaHQpO1xuICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRleCwgMCk7XG4gIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBnbC5ERVBUSF9BVFRBQ0hNRU5ULCBnbC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG5cbn1cblxuZnVuY3Rpb24gcmVuZGVyKGdsKVxue1xuICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcblxuICBnbEVycm9yU2hvdWxkQmUoZ2wsIGdsLk5PX0VSUk9SLCBcIm5vIGVycm9yIGZyb20gZHJhd1wiKTtcbn1cblxuZnVuY3Rpb24gZ2V0R1BVT3V0cHV0KGdsKVxue1xuXG4gIHZhciB3aWR0aCA9IGdsLmNhbnZhcy53aWR0aDtcbiAgdmFyIGhlaWdodCA9IGdsLmNhbnZhcy5oZWlnaHQ7XG4gIHZhciBidWYgPSBuZXcgRmxvYXQzMkFycmF5KHdpZHRoICogaGVpZ2h0ICogNCk7XG5cbiAgZ2wucmVhZFBpeGVscygwLCAwLCB3aWR0aCwgaGVpZ2h0LCBnbC5SR0JBLCBnbC5GTE9BVCwgYnVmKTtcblxuICByZXR1cm4gYnVmO1xufVxuXG5mdW5jdGlvbiBjaGVja0Vycm9yKHJlc3VsdCwgcmVmZXJlbmNlKVxue1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICB2YXIgbGluZTtcbiAgYWRkU3BhbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCBjdXJyZW50RGl2KTtcblxuICBsZXQgcmVmZXJlY2U2NCA9IHJlZmVyZW5jZVswXSArIHJlZmVyZW5jZVsxXTtcbiAgbGV0IHJlc3VsdDY0ID0gcmVzdWx0WzBdICsgcmVzdWx0WzFdO1xuXG4gIGxpbmUgPSAnQ1BVIG91dHB1dDogKCcgKyByZWZlcmVuY2VbMF0udG9TdHJpbmcoKSArICcsJyArIHJlZmVyZW5jZVsxXS50b1N0cmluZygpICsgJykgPSAnICsgcmVmZXJlY2U2NC50b1N0cmluZygpICsgJzxicj4nO1xuICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICBsaW5lID0gXCJHUFUgb3V0cHV0OiAoXCIgKyByZXN1bHRbMF0udG9TdHJpbmcoKSArICcsJyArIHJlc3VsdFsxXS50b1N0cmluZygpICsgJywnICsgcmVzdWx0WzJdLnRvU3RyaW5nKCkgKyAnLCcgKyByZXN1bHRbM10udG9TdHJpbmcoKSArICcpID0gJyArIHJlc3VsdDY0LnRvU3RyaW5nKCkgKyAnPGJyPic7XG4gIGFkZFNwYW4obGluZSwgY3VycmVudERpdik7XG5cbiAgbGluZSA9IFwiZXJyb3I6IFwiICsgTWF0aC5hYnMoKHJlZmVyZWNlNjQgLSByZXN1bHQ2NCkgLyByZWZlcmVjZTY0KSArICc8YnI+JztcbiAgYWRkU3BhbihsaW5lLCBjdXJyZW50RGl2KTtcblxuXG4gIC8vIHZhciByZWZlcmVuY2VCaXRzID0gbmV3IEludDMyQXJyYXkocmVmZXJlbmNlLmJ1ZmZlcik7XG4gIC8vIHZhciByZXN1bHRCaXRzID0gbmV3IEludDMyQXJyYXkocmVzdWx0LmJ1ZmZlcik7XG5cbiAgLy8gdmFyIHJlZkhpRXhwID0gKHJlZmVyZW5jZUJpdHNbMF0gJiAweDdGODAwMDAwKSA+Pj4gMjM7XG4gIC8vIHZhciByZWZMb0V4cCA9IChyZWZlcmVuY2VCaXRzWzFdICYgMHg3RjgwMDAwMCkgPj4+IDIzO1xuICAvLyB2YXIgcmVzSGlFeHAgPSAocmVzdWx0Qml0c1swXSAmIDB4N0Y4MDAwMDApID4+PiAyMztcbiAgLy8gdmFyIHJlc0xvRXhwID0gKHJlc3VsdEJpdHNbMV0gJiAweDdGODAwMDAwKSA+Pj4gMjM7XG5cbiAgLy8gdmFyIHJlZkhpTWFuID0gcmVmZXJlbmNlQml0c1swXSAmIDB4MDA3RkZGRkY7XG4gIC8vIHZhciByZWZMb01hbiA9IHJlZmVyZW5jZUJpdHNbMV0gJiAweDAwN0ZGRkZGO1xuICAvLyB2YXIgcmVzSGlNYW4gPSByZXN1bHRCaXRzWzBdICYgMHgwMDdGRkZGRjtcbiAgLy8gdmFyIHJlc0xvTWFuID0gcmVzdWx0Qml0c1sxXSAmIDB4MDA3RkZGRkY7XG5cbiAgLy8gaWYgKHJlZkhpRXhwICE9PSByZXNIaUV4cCB8fCByZWZMb0V4cCAhPT0gcmVzTG9FeHApXG4gIC8vIHtcbiAgLy8gICBsaW5lID0gXCJIaWdoIDgtYml0IGV4cG9uZW50IGVycm9yOiBcIiArIE1hdGguYWJzKHJlZkhpRXhwIC0gcmVzSGlFeHApLnRvU3RyaW5nKCkgKyBcIiB1bHA8YnI+XCI7XG4gIC8vICAgYWRkU3BhbihsaW5lLCBjdXJyZW50RGl2KTtcbiAgLy8gICBsaW5lID0gXCJMb3cgOC1iaXQgZXhwb25lbnQgZXJyb3I6IFwiICsgTWF0aC5hYnMocmVmTG9FeHAgLSByZXNMb0V4cCkudG9TdHJpbmcoKSArIFwiIHVscDxicj5cIjtcbiAgLy8gICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICAvLyB9XG5cbiAgLy8gbGluZSA9IFwiSGlnaCAyNC1iaXQgbWFudGlzc2EgcmVmZXJlbmNlOiBcIiArIHJlZkhpTWFuLnRvU3RyaW5nKDIpICsgXCIgcmVzdWx0OiBcIiArIHJlc0hpTWFuLnRvU3RyaW5nKDIpICsgXCIgZXJyb3I6IFwiICsgTWF0aC5hYnMocmVmSGlNYW4gLSByZXNIaU1hbikudG9TdHJpbmcoKSArIFwiIHVscDxicj5cIjtcbiAgLy8gYWRkU3BhbihsaW5lLCBjdXJyZW50RGl2KTtcbiAgLy8gbGluZSA9IFwiTG93IDI0LWJpdCBtYW50aXNzYSByZWZlcmVuY2U6IFwiICsgcmVmTG9NYW4udG9TdHJpbmcoMikgKyBcIiByZXN1bHQ6IFwiICsgcmVzTG9NYW4udG9TdHJpbmcoMikgKyBcIiBlcnJvcjogXCIgKyBNYXRoLmFicyhyZWZMb01hbiAtIHJlc0xvTWFuKS50b1N0cmluZygpICsgXCIgdWxwPGJyPlwiO1xuICAvLyBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xufVxuXG4vLyBBY3R1YWwgdGVzdHMgZm9yIGRpZmZlcmVudCBhcml0aG1ldGljIGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiB0ZXN0X2Zsb2F0X2FkZChnbCwgdGVzdE5hbWUpIHtcbiAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgYWRkU3Bhbih0ZXN0TmFtZSwgY3VycmVudERpdik7XG5cbiAvLyBmbG9hdCArXG4gIGNvbnN0IGZsb2F0MCA9IGdldEZsb2F0NjQoKTtcbiAgY29uc3QgZmxvYXQxID0gZ2V0RmxvYXQ2NCgpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBmbG9hdDAgKyBmbG9hdDE7XG5cbiAgY29uc3QgZmxvYXQwX3ZlYzIgPSBmcDY0aWZ5KGZsb2F0MCk7XG4gIGNvbnN0IGZsb2F0MV92ZWMyID0gZnA2NGlmeShmbG9hdDEpO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGdsLCBhc3NlbWJsZVNoYWRlcnMoZ2wsIHtcbiAgICAgICAgdnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL3ZzX2Zsb2F0X2FkZC5nbHNsJyksXG4gICAgICAgIGZzOiBnbHNsaWZ5KCcuL3NoYWRlci10ZXN0cy9mcy5nbHNsJyksXG4gICAgICAgIGZwNjQ6IHRydWUsXG4gICAgICAgIHByb2plY3Q2NDogdHJ1ZVxuICAgICAgfSkpO1xuICBwcm9ncmFtLnVzZSgpO1xuICBwcm9ncmFtLnNldEJ1ZmZlcnMoe1xuICAgIHBvc2l0aW9uczogbmV3IEJ1ZmZlcihnbCkuc2V0RGF0YSh7XG4gICAgICBkYXRhOiBuZXcgRmxvYXQzMkFycmF5KFsxLCAxLCAtMSwgMSwgMSwgLTEsIC0xLCAtMV0pLFxuICAgICAgc2l6ZTogMlxuICAgIH0pXG4gIH0pLnNldFVuaWZvcm1zKHtcbiAgICBhOiBmbG9hdDBfdmVjMixcbiAgICBiOiBmbG9hdDFfdmVjMixcbiAgICBPTkU6IDEuMFxuICB9KTtcblxuICB2YXIgbGluZTtcbiAgbGluZSA9IFwiKFwiICsgZmxvYXQwX3ZlYzIudG9TdHJpbmcoKSArICcpICsgKCcgKyBmbG9hdDFfdmVjMi50b1N0cmluZygpICsgJyk8YnI+JztcbiAgYWRkU3BhbihsaW5lLCBjdXJyZW50RGl2KTtcbiAgcmV0dXJuIGZsb2F0X3JlZl92ZWMyO1xufVxuXG5mdW5jdGlvbiB0ZXN0X2Zsb2F0X3N1YihnbCwgdGVzdE5hbWUpIHtcbiAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgYWRkU3Bhbih0ZXN0TmFtZSwgY3VycmVudERpdik7XG5cbiAvLyBmbG9hdCAtXG4gIGNvbnN0IGZsb2F0MCA9IGdldEZsb2F0NjQoKTtcbiAgY29uc3QgZmxvYXQxID0gZ2V0RmxvYXQ2NCgpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBmbG9hdDAgLSBmbG9hdDE7XG5cbiAgY29uc3QgZmxvYXQwX3ZlYzIgPSBmcDY0aWZ5KGZsb2F0MCk7XG4gIGNvbnN0IGZsb2F0MV92ZWMyID0gZnA2NGlmeShmbG9hdDEpO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFByb2dyYW0oZ2wsIGFzc2VtYmxlU2hhZGVycyhnbCwge1xuICAgICAgICB2czogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvdnNfZmxvYXRfc3ViLmdsc2wnKSxcbiAgICAgICAgZnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL2ZzLmdsc2wnKSxcbiAgICAgICAgZnA2NDogdHJ1ZSxcbiAgICAgICAgcHJvamVjdDY0OiB0cnVlXG4gICAgICB9KSk7XG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgYjogZmxvYXQxX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcIihcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKSAtICgnICsgZmxvYXQxX3ZlYzIudG9TdHJpbmcoKSArICcpPGJyPic7XG4gIGFkZFNwYW4obGluZSwgY3VycmVudERpdik7XG4gIHJldHVybiBmbG9hdF9yZWZfdmVjMjtcbn1cblxuZnVuY3Rpb24gdGVzdF9mbG9hdF9tdWwoZ2wsIHRlc3ROYW1lKSB7XG4gIHZhciBjdXJyZW50RGl2ID0gYWRkRGl2KCk7XG4gIGFkZFNwYW4odGVzdE5hbWUsIGN1cnJlbnREaXYpO1xuXG4gLy8gZmxvYXQgeFxuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDEyOCk7XG4gIGNvbnN0IGZsb2F0MSA9IGdldEZsb2F0NjQoMTI4KTtcblxuICBjb25zdCBmbG9hdF9yZWYgPSBmbG9hdDAgKiBmbG9hdDE7XG5cbiAgY29uc3QgZmxvYXQwX3ZlYzIgPSBmcDY0aWZ5KGZsb2F0MCk7XG4gIGNvbnN0IGZsb2F0MV92ZWMyID0gZnA2NGlmeShmbG9hdDEpO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFByb2dyYW0oZ2wsIGFzc2VtYmxlU2hhZGVycyhnbCwge1xuICAgICAgICB2czogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvdnNfZmxvYXRfbXVsLmdsc2wnKSxcbiAgICAgICAgZnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL2ZzLmdsc2wnKSxcbiAgICAgICAgZnA2NDogdHJ1ZSxcbiAgICAgICAgcHJvamVjdDY0OiB0cnVlXG4gICAgICB9KSk7XG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgYjogZmxvYXQxX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcIihcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKSAqICgnICsgZmxvYXQxX3ZlYzIudG9TdHJpbmcoKSArICcpPGJyPic7XG4gIGFkZFNwYW4obGluZSwgY3VycmVudERpdik7XG4gIHJldHVybiBmbG9hdF9yZWZfdmVjMjtcbn1cblxuZnVuY3Rpb24gdGVzdF9mbG9hdF9kaXYoZ2wsIHRlc3ROYW1lKSB7XG4gIHZhciBjdXJyZW50RGl2ID0gYWRkRGl2KCk7XG4gIGFkZFNwYW4odGVzdE5hbWUsIGN1cnJlbnREaXYpO1xuXG4gLy8gZmxvYXQgL1xuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDEyOCk7XG4gIGNvbnN0IGZsb2F0MSA9IGdldEZsb2F0NjQoMTI4KTtcbiAgY29uc3QgZmxvYXRfcmVmID0gZmxvYXQwIC8gZmxvYXQxO1xuXG4gIGNvbnN0IGZsb2F0MF92ZWMyID0gZnA2NGlmeShmbG9hdDApO1xuICBjb25zdCBmbG9hdDFfdmVjMiA9IGZwNjRpZnkoZmxvYXQxKTtcbiAgY29uc3QgZmxvYXRfcmVmX3ZlYzIgPSBmcDY0aWZ5KGZsb2F0X3JlZik7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGdsLCBhc3NlbWJsZVNoYWRlcnMoZ2wsIHtcbiAgICAgICAgdnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL3ZzX2Zsb2F0X2Rpdi5nbHNsJyksXG4gICAgICAgIGZzOiBnbHNsaWZ5KCcuL3NoYWRlci10ZXN0cy9mcy5nbHNsJyksXG4gICAgICAgIGZwNjQ6IHRydWUsXG4gICAgICAgIHByb2plY3Q2NDogdHJ1ZVxuICAgICAgfSkpXG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgYjogZmxvYXQxX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcIihcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKSAvICgnICsgZmxvYXQxX3ZlYzIudG9TdHJpbmcoKSArICcpPGJyPic7XG4gIGFkZFNwYW4obGluZSwgY3VycmVudERpdik7XG4gIHJldHVybiBmbG9hdF9yZWZfdmVjMjtcbn1cblxuZnVuY3Rpb24gdGVzdF9mbG9hdF9zcXJ0KGdsLCB0ZXN0TmFtZSkge1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICBhZGRTcGFuKHRlc3ROYW1lLCBjdXJyZW50RGl2KTtcblxuIC8vIHNxcnRcbiAgY29uc3QgZmxvYXQwID0gZ2V0RmxvYXQ2NCgxMjgpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBNYXRoLnNxcnQoZmxvYXQwKTtcblxuICBjb25zdCBmbG9hdDBfdmVjMiA9IGZwNjRpZnkoZmxvYXQwKTtcbiAgY29uc3QgZmxvYXRfcmVmX3ZlYzIgPSBmcDY0aWZ5KGZsb2F0X3JlZik7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGdsLCBhc3NlbWJsZVNoYWRlcnMoZ2wsIHtcbiAgICAgICAgdnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL3ZzX2Zsb2F0X3NxcnQuZ2xzbCcpLFxuICAgICAgICBmczogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvZnMuZ2xzbCcpLFxuICAgICAgICBmcDY0OiB0cnVlLFxuICAgICAgICBwcm9qZWN0NjQ6IHRydWVcbiAgICAgIH0pKTtcblxuICBwcm9ncmFtLnVzZSgpO1xuICBwcm9ncmFtLnNldEJ1ZmZlcnMoe1xuICAgIHBvc2l0aW9uczogbmV3IEJ1ZmZlcihnbCkuc2V0RGF0YSh7XG4gICAgICBkYXRhOiBuZXcgRmxvYXQzMkFycmF5KFsxLCAxLCAtMSwgMSwgMSwgLTEsIC0xLCAtMV0pLFxuICAgICAgc2l6ZTogMlxuICAgIH0pXG4gIH0pLnNldFVuaWZvcm1zKHtcbiAgICBhOiBmbG9hdDBfdmVjMixcbiAgICBPTkU6IDEuMFxuICB9KTtcblxuICB2YXIgbGluZTtcbiAgbGluZSA9IFwic3FydChcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKTxicj4nO1xuICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICByZXR1cm4gZmxvYXRfcmVmX3ZlYzI7XG59XG5cbmZ1bmN0aW9uIHRlc3RfZmxvYXRfZXhwKGdsLCB0ZXN0TmFtZSkge1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICBhZGRTcGFuKHRlc3ROYW1lLCBjdXJyZW50RGl2KTtcblxuIC8vIGV4cFxuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDYpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBNYXRoLmV4cChmbG9hdDApO1xuXG4gIGNvbnN0IGZsb2F0MF92ZWMyID0gZnA2NGlmeShmbG9hdDApO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFByb2dyYW0oZ2wsIGFzc2VtYmxlU2hhZGVycyhnbCwge1xuICAgICAgICB2czogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvdnNfZmxvYXRfZXhwLmdsc2wnKSxcbiAgICAgICAgZnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL2ZzLmdsc2wnKSxcbiAgICAgICAgZnA2NDogdHJ1ZSxcbiAgICAgICAgcHJvamVjdDY0OiB0cnVlXG4gICAgICB9KSk7XG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcImV4cChcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKTxicj4nO1xuICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICByZXR1cm4gZmxvYXRfcmVmX3ZlYzI7XG59XG5cbmZ1bmN0aW9uIHRlc3RfZmxvYXRfbG9nKGdsLCB0ZXN0TmFtZSkge1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICBhZGRTcGFuKHRlc3ROYW1lLCBjdXJyZW50RGl2KTtcblxuIC8vIGxvZ1xuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDI0KTtcbiAgY29uc3QgZmxvYXRfcmVmID0gTWF0aC5sb2coZmxvYXQwKTtcblxuICBjb25zdCBmbG9hdDBfdmVjMiA9IGZwNjRpZnkoZmxvYXQwKTtcbiAgY29uc3QgZmxvYXRfcmVmX3ZlYzIgPSBmcDY0aWZ5KGZsb2F0X3JlZik7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGdsLCBhc3NlbWJsZVNoYWRlcnMoZ2wsIHtcbiAgICAgICAgdnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL3ZzX2Zsb2F0X2xvZy5nbHNsJyksXG4gICAgICAgIGZzOiBnbHNsaWZ5KCcuL3NoYWRlci10ZXN0cy9mcy5nbHNsJyksXG4gICAgICAgIGZwNjQ6IHRydWUsXG4gICAgICAgIHByb2plY3Q2NDogdHJ1ZVxuICAgICAgfSkpO1xuXG4gIHByb2dyYW0udXNlKCk7XG4gIHByb2dyYW0uc2V0QnVmZmVycyh7XG4gICAgcG9zaXRpb25zOiBuZXcgQnVmZmVyKGdsKS5zZXREYXRhKHtcbiAgICAgIGRhdGE6IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIC0xLCAxLCAxLCAtMSwgLTEsIC0xXSksXG4gICAgICBzaXplOiAyXG4gICAgfSlcbiAgfSkuc2V0VW5pZm9ybXMoe1xuICAgIGE6IGZsb2F0MF92ZWMyLFxuICAgIE9ORTogMS4wXG4gIH0pO1xuXG4gIHZhciBsaW5lO1xuICBsaW5lID0gXCJsb2coXCIgKyBmbG9hdDBfdmVjMi50b1N0cmluZygpICsgJyk8YnI+JztcbiAgYWRkU3BhbihsaW5lLCBjdXJyZW50RGl2KTtcbiAgcmV0dXJuIGZsb2F0X3JlZl92ZWMyO1xufVxuXG5cbmZ1bmN0aW9uIHRlc3RfZmxvYXRfc2luKGdsLCB0ZXN0TmFtZSkge1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICBhZGRTcGFuKHRlc3ROYW1lLCBjdXJyZW50RGl2KTtcblxuIC8vIHNpblxuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDMpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBNYXRoLnNpbihmbG9hdDApO1xuXG4gIGNvbnN0IGZsb2F0MF92ZWMyID0gZnA2NGlmeShmbG9hdDApO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFByb2dyYW0oZ2wsIGFzc2VtYmxlU2hhZGVycyhnbCwge1xuICAgICAgICB2czogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvdnNfZmxvYXRfc2luLmdsc2wnKSxcbiAgICAgICAgZnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL2ZzLmdsc2wnKSxcbiAgICAgICAgZnA2NDogdHJ1ZSxcbiAgICAgICAgcHJvamVjdDY0OiB0cnVlXG4gICAgICB9KSk7XG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcInNpbihcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKTxicj4nO1xuICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICByZXR1cm4gZmxvYXRfcmVmX3ZlYzI7XG59XG5cbmZ1bmN0aW9uIHRlc3RfZmxvYXRfY29zKGdsLCB0ZXN0TmFtZSkge1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICBhZGRTcGFuKHRlc3ROYW1lLCBjdXJyZW50RGl2KTtcblxuIC8vIGNvc1xuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDMpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBNYXRoLmNvcyhmbG9hdDApO1xuXG4gIGNvbnN0IGZsb2F0MF92ZWMyID0gZnA2NGlmeShmbG9hdDApO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFByb2dyYW0oZ2wsIGFzc2VtYmxlU2hhZGVycyhnbCwge1xuICAgICAgICB2czogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvdnNfZmxvYXRfY29zLmdsc2wnKSxcbiAgICAgICAgZnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL2ZzLmdsc2wnKSxcbiAgICAgICAgZnA2NDogdHJ1ZSxcbiAgICAgICAgcHJvamVjdDY0OiB0cnVlXG4gICAgICB9KSk7XG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcImNvcyhcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKTxicj4nO1xuICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICByZXR1cm4gZmxvYXRfcmVmX3ZlYzI7XG59XG5cbmZ1bmN0aW9uIHRlc3RfZmxvYXRfdGFuKGdsLCB0ZXN0TmFtZSkge1xuICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICBhZGRTcGFuKHRlc3ROYW1lLCBjdXJyZW50RGl2KTtcblxuIC8vIHRhblxuICBjb25zdCBmbG9hdDAgPSBnZXRGbG9hdDY0KDMpO1xuICBjb25zdCBmbG9hdF9yZWYgPSBNYXRoLnRhbihmbG9hdDApO1xuXG4gIGNvbnN0IGZsb2F0MF92ZWMyID0gZnA2NGlmeShmbG9hdDApO1xuICBjb25zdCBmbG9hdF9yZWZfdmVjMiA9IGZwNjRpZnkoZmxvYXRfcmVmKTtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFByb2dyYW0oZ2wsIGFzc2VtYmxlU2hhZGVycyhnbCwge1xuICAgICAgICB2czogZ2xzbGlmeSgnLi9zaGFkZXItdGVzdHMvdnNfZmxvYXRfdGFuLmdsc2wnKSxcbiAgICAgICAgZnM6IGdsc2xpZnkoJy4vc2hhZGVyLXRlc3RzL2ZzLmdsc2wnKSxcbiAgICAgICAgZnA2NDogdHJ1ZSxcbiAgICAgICAgcHJvamVjdDY0OiB0cnVlXG4gICAgICB9KSk7XG5cbiAgcHJvZ3JhbS51c2UoKTtcbiAgcHJvZ3JhbS5zZXRCdWZmZXJzKHtcbiAgICBwb3NpdGlvbnM6IG5ldyBCdWZmZXIoZ2wpLnNldERhdGEoe1xuICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSxcbiAgICAgIHNpemU6IDJcbiAgICB9KVxuICB9KS5zZXRVbmlmb3Jtcyh7XG4gICAgYTogZmxvYXQwX3ZlYzIsXG4gICAgT05FOiAxLjBcbiAgfSk7XG5cbiAgdmFyIGxpbmU7XG4gIGxpbmUgPSBcInRhbihcIiArIGZsb2F0MF92ZWMyLnRvU3RyaW5nKCkgKyAnKTxicj4nO1xuICBhZGRTcGFuKGxpbmUsIGN1cnJlbnREaXYpO1xuICByZXR1cm4gZmxvYXRfcmVmX3ZlYzI7XG59XG5cbi8vIE1haW4gZW50cmFuY2VcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cbiAgY2FudmFzLndpZHRoID0gMTY7XG4gIGNhbnZhcy5oZWlnaHQgPSAxNjtcblxuICAvLyBJbml0aWFsaXplIEdMXG5cbiAgdmFyIGdsID0gaW5pdGlhbGl6ZUdMKGNhbnZhcyk7XG4gIGluaXRpYWxpemVUZXhUYXJnZXQoZ2wpO1xuXG4gIHZhciBpZHgwO1xuICB2YXIgdGVzdF9ubyA9IDA7XG4gIGNvbnN0IGxvb3AgPSAyMDtcblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cbiAgICB2YXIgY3B1X3Jlc3VsdCA9IHRlc3RfZmxvYXRfYWRkKGdsLCBcIkZsb2F0IGFkZGl0aW9uIHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gIH1cblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cbiAgICB2YXIgY3B1X3Jlc3VsdCA9IHRlc3RfZmxvYXRfc3ViKGdsLCBcIkZsb2F0IHN1YnRyYWN0aW9uIHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gIH1cblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cbiAgICB2YXIgY3B1X3Jlc3VsdCA9IHRlc3RfZmxvYXRfbXVsKGdsLCBcIkZsb2F0IG11bHRpcGxpY2F0aW9uIHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gIH1cblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cbiAgICB2YXIgY3B1X3Jlc3VsdCA9IHRlc3RfZmxvYXRfZGl2KGdsLCBcIkZsb2F0IGRpdmlzaW9uIHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gIH1cblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cbiAgICB2YXIgY3B1X3Jlc3VsdCA9IHRlc3RfZmxvYXRfc3FydChnbCwgXCJGbG9hdCBzcXJ0IHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gIH1cblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cbiAgICB2YXIgY3B1X3Jlc3VsdCA9IHRlc3RfZmxvYXRfZXhwKGdsLCBcIkZsb2F0IGV4cCB0ZXN0XCIpO1xuXG4gICAgcmVuZGVyKGdsKTtcblxuICAgIHZhciBncHVfcmVzdWx0ID0gZ2V0R1BVT3V0cHV0KGdsKTtcblxuICAgIGNoZWNrRXJyb3IoZ3B1X3Jlc3VsdCwgY3B1X3Jlc3VsdCk7XG5cbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICB9XG5cbiAgZm9yIChpZHgwID0gMDsgaWR4MCA8IGxvb3A7IGlkeDArKykge1xuICAgIHZhciBjdXJyZW50RGl2ID0gYWRkRGl2KCk7XG4gICAgYWRkU3BhbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCBjdXJyZW50RGl2KTtcbiAgICBhZGRTcGFuKFwiTG9vcCBOby4gXCIgKyB0ZXN0X25vKyssIGN1cnJlbnREaXYpO1xuXG4gICAgdmFyIGNwdV9yZXN1bHQgPSB0ZXN0X2Zsb2F0X2xvZyhnbCwgXCJGbG9hdCBsb2cgdGVzdFwiKTtcblxuICAgIHJlbmRlcihnbCk7XG5cbiAgICB2YXIgZ3B1X3Jlc3VsdCA9IGdldEdQVU91dHB1dChnbCk7XG5cbiAgICBjaGVja0Vycm9yKGdwdV9yZXN1bHQsIGNwdV9yZXN1bHQpO1xuXG4gICAgYWRkU3BhbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCBjdXJyZW50RGl2KTtcbiAgfVxuXG4gIGZvciAoaWR4MCA9IDA7IGlkeDAgPCBsb29wOyBpZHgwKyspIHtcbiAgICB2YXIgY3VycmVudERpdiA9IGFkZERpdigpO1xuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gICAgYWRkU3BhbihcIkxvb3AgTm8uIFwiICsgdGVzdF9ubysrLCBjdXJyZW50RGl2KTtcblxuICAgIHZhciBjcHVfcmVzdWx0ID0gdGVzdF9mbG9hdF9zaW4oZ2wsIFwiRmxvYXQgc2luIHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gICB9XG5cbiAgZm9yIChpZHgwID0gMDsgaWR4MCA8IGxvb3A7IGlkeDArKykge1xuICAgIHZhciBjdXJyZW50RGl2ID0gYWRkRGl2KCk7XG4gICAgYWRkU3BhbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCBjdXJyZW50RGl2KTtcbiAgICBhZGRTcGFuKFwiTG9vcCBOby4gXCIgKyB0ZXN0X25vKyssIGN1cnJlbnREaXYpO1xuXG4gICAgdmFyIGNwdV9yZXN1bHQgPSB0ZXN0X2Zsb2F0X2NvcyhnbCwgXCJGbG9hdCBjb3MgdGVzdFwiKTtcblxuICAgIHJlbmRlcihnbCk7XG5cbiAgICB2YXIgZ3B1X3Jlc3VsdCA9IGdldEdQVU91dHB1dChnbCk7XG5cbiAgICBjaGVja0Vycm9yKGdwdV9yZXN1bHQsIGNwdV9yZXN1bHQpO1xuXG4gICAgYWRkU3BhbihcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLCBjdXJyZW50RGl2KTtcblxuXG4gIH1cblxuICBmb3IgKGlkeDAgPSAwOyBpZHgwIDwgbG9vcDsgaWR4MCsrKSB7XG4gICAgdmFyIGN1cnJlbnREaXYgPSBhZGREaXYoKTtcbiAgICBhZGRTcGFuKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsIGN1cnJlbnREaXYpO1xuICAgIGFkZFNwYW4oXCJMb29wIE5vLiBcIiArIHRlc3Rfbm8rKywgY3VycmVudERpdik7XG5cblxuICAgIHZhciBjcHVfcmVzdWx0ID0gdGVzdF9mbG9hdF90YW4oZ2wsIFwiRmxvYXQgdGFuIHRlc3RcIik7XG5cbiAgICByZW5kZXIoZ2wpO1xuXG4gICAgdmFyIGdwdV9yZXN1bHQgPSBnZXRHUFVPdXRwdXQoZ2wpO1xuXG4gICAgY2hlY2tFcnJvcihncHVfcmVzdWx0LCBjcHVfcmVzdWx0KTtcblxuICAgIGFkZFNwYW4oXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiwgY3VycmVudERpdik7XG4gIH1cblxufVxuIl19